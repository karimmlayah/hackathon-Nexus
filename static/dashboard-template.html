<!DOCTYPE html>
<html lang="en">
<head>
    <meta charSet="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Dashboard | FinFit</title>
    <link rel="stylesheet" href="/dasher-assets/css/app/layout.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
</head>
<body class="overflow-hidden">
    <div id="__next" style="display: flex; min-height: 100vh;">
        <!-- Sidebar -->
        <div id="miniSidebar" style="width: 280px; background: #0d0f1f; color: white; overflow-y: auto; padding: 20px;">
            <div style="margin-bottom: 40px; padding-bottom: 20px; border-bottom: 1px solid rgba(255,255,255,0.1); display: flex; align-items: center; gap: 10px;">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-5a2 2 0 0 0-2-2z"/>
                </svg>
                <span style="font-weight: 600; font-size: 18px;">FinFit</span>
            </div>
            
            <nav style="list-style: none; padding: 0;">
                <div style="display: flex; align-items: center; gap: 12px; padding: 12px 15px; margin-bottom: 8px; border-radius: 8px; background-color: rgba(102, 126, 234, 0.2); color: white; cursor: pointer; text-decoration: none;">
                    <i class="bi bi-speedometer2" style="font-size: 18px;"></i>
                    <span>Dashboard</span>
                </div>
                <div style="display: flex; align-items: center; gap: 12px; padding: 12px 15px; margin-bottom: 8px; border-radius: 8px; color: rgba(255,255,255,0.7); cursor: pointer; text-decoration: none; transition: all 0.3s ease;">
                    <i class="bi bi-folder" style="font-size: 18px;"></i>
                    <span>Project</span>
                </div>
                <div style="display: flex; align-items: center; gap: 12px; padding: 12px 15px; margin-bottom: 8px; border-radius: 8px; color: rgba(255,255,255,0.7); cursor: pointer; text-decoration: none; transition: all 0.3s ease;">
                    <i class="bi bi-shop" style="font-size: 18px;"></i>
                    <span>Ecommerce</span>
                </div>
                <div style="display: flex; align-items: center; gap: 12px; padding: 12px 15px; margin-bottom: 8px; border-radius: 8px; color: rgba(255,255,255,0.7); cursor: pointer; text-decoration: none; transition: all 0.3s ease;">
                    <i class="bi bi-newspaper" style="font-size: 18px;"></i>
                    <span>Blog</span>
                </div>
                <div style="display: flex; align-items: center; gap: 12px; padding: 12px 15px; margin-bottom: 8px; border-radius: 8px; color: rgba(255,255,255,0.7); cursor: pointer; text-decoration: none; transition: all 0.3s ease;">
                    <i class="bi bi-cart" style="font-size: 18px;"></i>
                    <span>My Cart</span>
                </div>
                <div style="display: flex; align-items: center; gap: 12px; padding: 12px 15px; margin-bottom: 8px; border-radius: 8px; color: rgba(255,255,255,0.7); cursor: pointer; text-decoration: none; transition: all 0.3s ease;">
                    <i class="bi bi-heart" style="font-size: 18px;"></i>
                    <span>My Favorites</span>
                </div>
                <div style="display: flex; align-items: center; gap: 12px; padding: 12px 15px; margin-bottom: 8px; border-radius: 8px; color: rgba(255,255,255,0.7); cursor: pointer; text-decoration: none; transition: all 0.3s ease;">
                    <i class="bi bi-lock" style="font-size: 18px;"></i>
                    <span>Auth</span>
                </div>
            </nav>
        </div>

        <!-- Main Content -->
        <div id="content" style="flex: 1; overflow-y: auto; background: #f8fafc;">
            <!-- Header -->
            <div style="background: white; padding: 20px 30px; border-bottom: 1px solid #e9ecef; display: flex; justify-content: space-between; align-items: center;">
                <h1 style="margin: 0; font-size: 24px; font-weight: 600; color: #1a1f35;">Dashboard</h1>
                <div style="display: flex; align-items: center; gap: 20px;">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <div id="userAvatar" style="width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 16px;">A</div>
                        <div style="display: flex; flex-direction: column;">
                            <div id="userName" style="font-weight: 600; color: #1a1f35; font-size: 14px;">Admin User</div>
                            <div id="userRole" style="color: #999; font-size: 12px;">Super Admin</div>
                        </div>
                    </div>
                    <button onclick="logout()" style="padding: 8px 16px; background-color: #dc3545; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500;">Logout</button>
                </div>
            </div>

            <!-- Content Area -->
            <div style="padding: 30px; max-width: 1400px;">
                <!-- Welcome Banner -->
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 8px; margin-bottom: 30px;">
                    <h2 style="font-size: 28px; margin-bottom: 10px; margin: 0 0 10px 0;">Welcome Back! üëã</h2>
                    <p style="margin: 0; opacity: 0.95;">You are logged in as Super Admin. You have access to all features of the FinFit platform.</p>
                </div>

                <!-- Stats Grid -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-bottom: 30px;">
                    <!-- Stat Card 1 -->
                    <div style="background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); border-top: 3px solid #667eea;">
                        <div style="font-size: 32px; margin-bottom: 15px;">üì¶</div>
                        <div style="color: #999; font-size: 12px; text-transform: uppercase; font-weight: 600; margin-bottom: 10px; letter-spacing: 0.5px;">Total Products</div>
                        <div id="totalProducts" style="font-size: 32px; font-weight: 700; color: #1a1f35; margin-bottom: 10px;">0</div>
                        <div style="color: #17a2b8; font-size: 12px;">from Qdrant Completed</div>
                    </div>

                    <!-- Stat Card 2 -->
                    <div style="background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); border-top: 3px solid #27ae60;">
                        <div style="font-size: 32px; margin-bottom: 15px;">üìÇ</div>
                        <div style="color: #999; font-size: 12px; text-transform: uppercase; font-weight: 600; margin-bottom: 10px; letter-spacing: 0.5px;">Categories</div>
                        <div style="font-size: 32px; font-weight: 700; color: #1a1f35; margin-bottom: 10px;">5</div>
                        <div style="color: #17a2b8; font-size: 12px;">Unique counts Completed</div>
                    </div>

                    <!-- Stat Card 3 -->
                    <div style="background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); border-top: 3px solid #f39c12;">
                        <div style="font-size: 32px; margin-bottom: 15px;">üè∑Ô∏è</div>
                        <div style="color: #999; font-size: 12px; text-transform: uppercase; font-weight: 600; margin-bottom: 10px; letter-spacing: 0.5px;">Brands</div>
                        <div style="font-size: 32px; font-weight: 700; color: #1a1f35; margin-bottom: 10px;">0</div>
                        <div style="color: #17a2b8; font-size: 12px;">Featured Completed</div>
                    </div>

                    <!-- Stat Card 4 -->
                    <div style="background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); border-top: 3px solid #17a2b8;">
                        <div style="font-size: 32px; margin-bottom: 15px;">‚úÖ</div>
                        <div style="color: #999; font-size: 12px; text-transform: uppercase; font-weight: 600; margin-bottom: 10px; letter-spacing: 0.5px;">In Stock</div>
                        <div style="font-size: 32px; font-weight: 700; color: #1a1f35; margin-bottom: 10px;">100%</div>
                        <div style="color: #17a2b8; font-size: 12px;">Availability</div>
                    </div>
                </div>

                <!-- Active Projects Table -->
                <div style="background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 30px;">
                    <h5 style="font-size: 18px; font-weight: 600; color: #1a1f35; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; margin: 0 0 20px 0;">
                        <i class="bi bi-folder-open" style="color: #667eea; font-size: 22px;"></i>
                        Active Projects
                    </h5>
                    <div style="overflow-x: auto;">
                        <table style="width: 100%; border-collapse: collapse; margin-bottom: 0;">
                            <thead>
                                <tr>
                                    <th style="background-color: #f8fafc; color: #666; font-weight: 600; text-transform: uppercase; font-size: 12px; border: none; padding: 15px; text-align: left;">Name</th>
                                    <th style="background-color: #f8fafc; color: #666; font-weight: 600; text-transform: uppercase; font-size: 12px; border: none; padding: 15px; text-align: left;">Progress</th>
                                    <th style="background-color: #f8fafc; color: #666; font-weight: 600; text-transform: uppercase; font-size: 12px; border: none; padding: 15px; text-align: left;">Status</th>
                                    <th style="background-color: #f8fafc; color: #666; font-weight: 600; text-transform: uppercase; font-size: 12px; border: none; padding: 15px; text-align: left;">Assigned</th>
                                    <th style="background-color: #f8fafc; color: #666; font-weight: 600; text-transform: uppercase; font-size: 12px; border: none; padding: 15px; text-align: left;">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="border-bottom: 1px solid #e9ecef;">
                                    <td style="padding: 15px; color: #555; font-size: 14px;">
                                        <strong>Website Redesign</strong><br>
                                        <span style="font-size: 12px; color: #999;">Jan 30, 2025</span>
                                    </td>
                                    <td style="padding: 15px; color: #555; font-size: 14px;">
                                        <div style="height: 8px; border-radius: 4px; background-color: #e9ecef; margin-bottom: 5px;">
                                            <div style="height: 100%; width: 65%; background-color: #27ae60; border-radius: 4px;"></div>
                                        </div>
                                        65%
                                    </td>
                                    <td style="padding: 15px; color: #555; font-size: 14px;">
                                        <span style="padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: 500; background-color: #d4edda; color: #155724;">On Track</span>
                                    </td>
                                    <td style="padding: 15px; color: #555; font-size: 14px;">üë•+3</td>
                                    <td style="padding: 15px; color: #555; font-size: 14px;"><i class="bi bi-three-dots-vertical"></i></td>
                                </tr>
                                <tr style="border-bottom: 1px solid #e9ecef;">
                                    <td style="padding: 15px; color: #555; font-size: 14px;">
                                        <strong>Marketing Campaign</strong><br>
                                        <span style="font-size: 12px; color: #999;">Feb 10, 2025</span>
                                    </td>
                                    <td style="padding: 15px; color: #555; font-size: 14px;">
                                        <div style="height: 8px; border-radius: 4px; background-color: #e9ecef; margin-bottom: 5px;">
                                            <div style="height: 100%; width: 20%; background-color: #f39c12; border-radius: 4px;"></div>
                                        </div>
                                        20%
                                    </td>
                                    <td style="padding: 15px; color: #555; font-size: 14px;">
                                        <span style="padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: 500; background-color: #f8d7da; color: #721c24;">Delayed</span>
                                    </td>
                                    <td style="padding: 15px; color: #555; font-size: 14px;">üë•+2</td>
                                    <td style="padding: 15px; color: #555; font-size: 14px;"><i class="bi bi-three-dots-vertical"></i></td>
                                </tr>
                                <tr style="border-bottom: 1px solid #e9ecef;">
                                    <td style="padding: 15px; color: #555; font-size: 14px;">
                                        <strong>Mobile App Development</strong><br>
                                        <span style="font-size: 12px; color: #999;">Mar 1, 2025</span>
                                    </td>
                                    <td style="padding: 15px; color: #555; font-size: 14px;">
                                        <div style="height: 8px; border-radius: 4px; background-color: #e9ecef; margin-bottom: 5px;">
                                            <div style="height: 100%; width: 45%; background-color: #f39c12; border-radius: 4px;"></div>
                                        </div>
                                        45%
                                    </td>
                                    <td style="padding: 15px; color: #555; font-size: 14px;">
                                        <span style="padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: 500; background-color: #fff3cd; color: #856404;">At Risk</span>
                                    </td>
                                    <td style="padding: 15px; color: #555; font-size: 14px;">üë•+1</td>
                                    <td style="padding: 15px; color: #555; font-size: 14px;"><i class="bi bi-three-dots-vertical"></i></td>
                                </tr>
                                <tr style="border-bottom: 1px solid #e9ecef;">
                                    <td style="padding: 15px; color: #555; font-size: 14px;">
                                        <strong>Customer Portal Upgrade</strong><br>
                                        <span style="font-size: 12px; color: #999;">Feb 15, 2025</span>
                                    </td>
                                    <td style="padding: 15px; color: #555; font-size: 14px;">
                                        <div style="height: 8px; border-radius: 4px; background-color: #e9ecef; margin-bottom: 5px;">
                                            <div style="height: 100%; width: 89%; background-color: #27ae60; border-radius: 4px;"></div>
                                        </div>
                                        89%
                                    </td>
                                    <td style="padding: 15px; color: #555; font-size: 14px;">
                                        <span style="padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: 500; background-color: #d4edda; color: #155724;">On Track</span>
                                    </td>
                                    <td style="padding: 15px; color: #555; font-size: 14px;">üë•+1</td>
                                    <td style="padding: 15px; color: #555; font-size: 14px;"><i class="bi bi-three-dots-vertical"></i></td>
                                </tr>
                                <tr>
                                    <td style="padding: 15px; color: #555; font-size: 14px;">
                                        <strong>Product Launch</strong><br>
                                        <span style="font-size: 12px; color: #999;">Jan 25, 2025</span>
                                    </td>
                                    <td style="padding: 15px; color: #555; font-size: 14px;">
                                        <div style="height: 8px; border-radius: 4px; background-color: #e9ecef; margin-bottom: 5px;">
                                            <div style="height: 100%; width: 100%; background-color: #27ae60; border-radius: 4px;"></div>
                                        </div>
                                        100%
                                    </td>
                                    <td style="padding: 15px; color: #555; font-size: 14px;">
                                        <span style="padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: 500; background-color: #d4edda; color: #155724;">Completed</span>
                                    </td>
                                    <td style="padding: 15px; color: #555; font-size: 14px;">üë•+1</td>
                                    <td style="padding: 15px; color: #555; font-size: 14px;"><i class="bi bi-three-dots-vertical"></i></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Admin Features -->
                <div style="background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                    <h5 style="font-size: 18px; font-weight: 600; color: #1a1f35; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; margin: 0 0 20px 0;">
                        <i class="bi bi-star" style="color: #667eea; font-size: 22px;"></i>
                        Admin Features Available
                    </h5>
                    <ul style="list-style: none; padding: 0; margin: 0;">
                        <li style="padding: 12px 0; color: #555; display: flex; align-items: center; gap: 10px; border-bottom: 1px solid #e9ecef;">
                            <i class="bi bi-check-circle" style="color: #27ae60; font-size: 16px;"></i> Manage Projects and Tasks
                        </li>
                        <li style="padding: 12px 0; color: #555; display: flex; align-items: center; gap: 10px; border-bottom: 1px solid #e9ecef;">
                            <i class="bi bi-check-circle" style="color: #27ae60; font-size: 16px;"></i> Monitor Ecommerce Products & Sales
                        </li>
                        <li style="padding: 12px 0; color: #555; display: flex; align-items: center; gap: 10px; border-bottom: 1px solid #e9ecef;">
                            <i class="bi bi-check-circle" style="color: #27ae60; font-size: 16px;"></i> Manage Blog Posts & Content
                        </li>
                        <li style="padding: 12px 0; color: #555; display: flex; align-items: center; gap: 10px; border-bottom: 1px solid #e9ecef;">
                            <i class="bi bi-check-circle" style="color: #27ae60; font-size: 16px;"></i> View Cart Management
                        </li>
                        <li style="padding: 12px 0; color: #555; display: flex; align-items: center; gap: 10px; border-bottom: 1px solid #e9ecef;">
                            <i class="bi bi-check-circle" style="color: #27ae60; font-size: 16px;"></i> Manage Customer Favorites
                        </li>
                        <li style="padding: 12px 0; color: #555; display: flex; align-items: center; gap: 10px; border-bottom: 1px solid #e9ecef;">
                            <i class="bi bi-check-circle" style="color: #27ae60; font-size: 16px;"></i> User Authentication & Authorization
                        </li>
                        <li style="padding: 12px 0; color: #555; display: flex; align-items: center; gap: 10px; border-bottom: 1px solid #e9ecef;">
                            <i class="bi bi-check-circle" style="color: #27ae60; font-size: 16px;"></i> Analytics & Statistics
                        </li>
                        <li style="padding: 12px 0; color: #555; display: flex; align-items: center; gap: 10px;">
                            <i class="bi bi-check-circle" style="color: #27ae60; font-size: 16px;"></i> RAG Integration & Control
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
        function loadUserInfo() {
            const userStr = localStorage.getItem('finfit_user');
            if (!userStr) {
                window.location.href = '/signin.html';
                return;
            }

            try {
                const user = JSON.parse(userStr);
                document.getElementById('userName').textContent = user.name || 'Admin User';
                document.getElementById('userRole').textContent = 
                    user.role === 'super_admin' ? 'Super Admin' : 'User';
                
                const initial = (user.name || 'A').charAt(0).toUpperCase();
                document.getElementById('userAvatar').textContent = initial;
            } catch (e) {
                console.error('Error loading user info:', e);
            }
        }

        async function loadProductCount() {
            try {
                const response = await fetch('/products?limit=1');
                const data = await response.json();
                if (data.total_products) {
                    document.getElementById('totalProducts').textContent = data.total_products.toLocaleString();
                }
            } catch (e) {
                console.error('Error loading products:', e);
            }
        }

        function logout() {
            localStorage.removeItem('finfit_token');
            localStorage.removeItem('finfit_user');
            window.location.href = '/signin.html';
        }

        window.addEventListener('load', function() {
            loadUserInfo();
            loadProductCount();
        });
    </script>
</body>
</html>
