<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>FinFit - Electronics Website Template</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500;600;700&family=Roboto:wght@400;500;700&display=swap"
        rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="/static/lib/animate/animate.min.css" rel="stylesheet">
    <link href="/static/lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">


    <!-- Customized Bootstrap Stylesheet -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="/static/css/style.css" rel="stylesheet">
    <style>
        /* Sticky Main Header */
        .sticky-header {
            position: sticky;
            top: 45px;
            z-index: 999;
            background: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        /* Force consistent image sizes in product cards */
        .product-item-inner-item img {
            height: 200px !important;
            width: 100%;
            object-fit: contain;
            padding: 10px;
        }

        /* Chatbot product images */
        .product-card img {
            width: 60px;
            height: 60px;
            object-fit: contain;
            border-right: 1px solid #eee;
            padding: 5px;
        }

        /* Carousel images */
        .header-carousel-item img {
            max-height: 400px;
            object-fit: contain;
        }
    </style>
</head>

<body>

    <!-- Spinner Start -->
    <div id="spinner"
        class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
        <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
    <!-- Spinner End -->



    <div class="container-fluid px-5 py-4 d-none d-lg-block sticky-header">
        <div class="row gx-0 align-items-center text-center">
            <div class="col-md-4 col-lg-3 text-center text-lg-start">
                <div class="d-inline-flex align-items-center">
                    <a href="" class="navbar-brand p-0">
                        <h1 class="display-5 text-primary m-0"><i
                                class="fas fa-shopping-bag text-secondary me-2"></i>FinFit</h1>
                        <!-- <img src="/static/img/logo.png" alt="Logo"> -->
                    </a>
                </div>
            </div>
            <div class="col-md-4 col-lg-6 text-center">
                <div class="position-relative ps-4">
                    <div class="position-relative ps-4 text-center">
                        <div class="search-bar-google d-flex align-items-center bg-white rounded-pill shadow-sm border px-3"
                            style="max-width: 600px; margin: 0 auto; height: 50px;">
                            <i class="fas fa-search text-muted me-3"></i>
                            <input id="searchInput" class="form-control border-0 bg-transparent shadow-none w-100"
                                type="text" placeholder="Search Products..."
                                onkeypress="if(event.key === 'Enter') handleSearchClick()" style="font-size: 1.1rem;">

                            <!-- Vertical Divider -->
                            <div class="border-start mx-2" style="height: 25px;"></div>

                            <!-- Voice Search Icon -->
                            <button type="button" class="btn btn-link text-muted p-2" onclick="startVoiceSearch()"
                                title="Voice Search">
                                <i id="micIcon" class="fas fa-microphone fa-lg hover-primary"></i>
                            </button>

                            <!-- Camera Icon for Image Search -->
                            <button type="button" class="btn btn-link text-muted p-2" onclick="triggerImageUpload()"
                                title="Search by Image">
                                <i class="fas fa-camera fa-lg hover-primary"></i>
                            </button>

                            <!-- Search Button -->
                            <button type="button"
                                class="btn btn-primary rounded-circle ms-2 d-flex align-items-center justify-content-center"
                                style="width: 40px; height: 40px;" onclick="handleSearchClick()">
                                <i class="fas fa-arrow-right"></i>
                            </button>

                            <!-- Hidden File Input -->
                            <input type="file" id="imageInput" class="d-none" accept="image/*"
                                onchange="handleImageSelect(event)">
                            <input type="hidden" id="searchMode" value="text">
                        </div>
                    </div>
                </div>
                <!-- Image Upload Area (Hidden by default) -->

            </div>
            <div class="col-md-4 col-lg-3 text-center text-lg-end">
                <div class="d-inline-flex align-items-center">
                    <a href="wishlist.html"
                        class="text-muted d-flex align-items-center justify-content-center me-3 position-relative">
                        <span class="rounded-circle btn-md-square border"><i class="fas fa-heart"></i></span>
                        <span id="wishlistBadge"
                            class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
                            style="display: none;">0</span>
                    </a>
                    <a href="cart.html"
                        class="text-muted d-flex align-items-center justify-content-center position-relative">
                        <span class="rounded-circle btn-md-square border"><i class="fas fa-shopping-cart"></i></span>
                        <span id="cartBadge"
                            class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
                            style="display: none;">0</span>
                    </a>
                    <!-- <span id="cartTotal" class="text-dark ms-3 fw-bold">$0.00</span> -->
                </div>
            </div>
        </div>
    </div>
    <!-- Topbar End -->

    <!-- Navbar & Hero Start -->
    <div class="container-fluid nav-bar p-0">
        <div class="row gx-0 bg-primary px-5 align-items-center">
            <div class="col-lg-3 d-none d-lg-block">
                <nav class="navbar navbar-light position-relative" style="width: 250px;">
                    <button class="navbar-toggler border-0 fs-4 w-100 px-0 text-start" type="button"
                        data-bs-toggle="collapse" data-bs-target="#allCat">
                        <h4 class="m-0"><i class="fa fa-bars me-2"></i>All Categories</h4>
                    </button>
                    <div class="collapse navbar-collapse rounded-bottom" id="allCat">
                        <div class="navbar-nav ms-auto py-0">
                            <ul class="list-unstyled categories-bars">
                                <li>
                                    <div class="categories-bars-item">
                                        <a href="#tab-1" data-bs-toggle="pill"
                                            onclick="loadTab('tab-1', 'Accessories')">Accessories</a>
                                        <span>(12)</span>
                                    </div>
                                </li>
                                <li>
                                    <div class="categories-bars-item">
                                        <a href="#tab-1" data-bs-toggle="pill"
                                            onclick="loadTab('tab-1', 'Fashion')">Fashion</a>
                                        <span>(15)</span>
                                    </div>
                                </li>
                                <li>
                                    <div class="categories-bars-item">
                                        <a href="#tab-1" data-bs-toggle="pill"
                                            onclick="loadTab('tab-1', 'Electronics')">Electronics</a>
                                        <span>(20)</span>
                                    </div>
                                </li>
                                <li>
                                    <div class="categories-bars-item">
                                        <a href="#tab-1" data-bs-toggle="pill"
                                            onclick="loadTab('tab-1', 'Decoration')">Decoration</a>
                                        <span>(10)</span>
                                    </div>
                                </li>
                                <li>
                                    <div class="categories-bars-item">
                                        <a href="#tab-1" data-bs-toggle="pill"
                                            onclick="loadTab('tab-1', 'Mobiles')">Mobiles</a>
                                        <span>(8)</span>
                                    </div>
                                </li>
                            </ul>

                        </div>

                    </div>
                </nav>
            </div>
            <div class="col-12 col-lg-9">
                <nav class="navbar navbar-expand-lg navbar-light bg-primary ">
                    <a href="" class="navbar-brand d-block d-lg-none">
                        <h1 class="display-5 text-secondary m-0"><i
                                class="fas fa-shopping-bag text-white me-2"></i>FinFit</h1>
                        <!-- <img src="/static/img/logo.png" alt="Logo"> -->
                    </a>
                    <button class="navbar-toggler ms-auto" type="button" data-bs-toggle="collapse"
                        data-bs-target="#navbarCollapse">
                        <span class="fa fa-bars fa-1x"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarCollapse">
                        <div class="navbar-nav ms-auto py-0">
                            <a href="index.html" class="nav-item nav-link active">Home</a>
                            <a href="shop.html" class="nav-item nav-link">Shop</a>
                            <a href="single.html" class="nav-item nav-link">Single Page</a>
                            <div class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Pages</a>
                                <div class="dropdown-menu m-0">
                                    <a href="bestseller.html" class="dropdown-item">Bestseller</a>
                                    <a href="bestseller.html" class="dropdown-item">Bestseller</a>
                                    <a href="cart.html" class="dropdown-item">Cart Page</a>
                                    <a href="wishlist.html" class="dropdown-item">Wishlist</a>
                                    <a href="cheackout.html" class="dropdown-item">Cheackout</a>
                                    <a href="404.html" class="dropdown-item">404 Page</a>
                                </div>
                            </div>
                            <a href="contact.html" class="nav-item nav-link me-2">Contact</a>
                            <div class="nav-item dropdown d-block d-lg-none mb-3">
                                <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">All Category</a>
                                <div class="dropdown-menu m-0">
                                    <ul class="list-unstyled categories-bars">
                                        <li>
                                            <div class="categories-bars-item">
                                                <a href="#">Accessories</a>
                                                <span>(3)</span>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="categories-bars-item">
                                                <a href="#">Electronics & Computer</a>
                                                <span>(5)</span>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="categories-bars-item">
                                                <a href="#">Laptops & Desktops</a>
                                                <span>(2)</span>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="categories-bars-item">
                                                <a href="#">Mobiles & Tablets</a>
                                                <span>(8)</span>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="categories-bars-item">
                                                <a href="#">SmartPhone & Smart TV</a>
                                                <span>(5)</span>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <a href="" class="btn btn-secondary rounded-pill py-2 px-4 px-lg-3 mb-3 mb-md-3 mb-lg-0"><i
                                class="fa fa-mobile-alt me-2"></i> +0123 456 7890</a>
                    </div>
                </nav>
            </div>
        </div>
    </div>
    <!-- Navbar & Hero End -->

    <!-- Carousel Start -->
    <div class="container-fluid carousel bg-light px-0">
        <div class="row g-0 justify-content-end">
            <div class="col-12 col-lg-7 col-xl-9">
                <div class="header-carousel owl-carousel bg-light py-5" id="headerCarousel">
                    <!-- 2 random products loaded from Qdrant Cloud -->
                    <div class="row g-0 header-carousel-item align-items-center">
                        <div class="col-12 text-center py-5">
                            <div class="spinner-border text-primary" role="status"></div>
                            <p class="mt-2 text-muted">Chargement des produits...</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-5 col-xl-3 wow fadeInRight" data-wow-delay="0.1s">
                <div class="carousel-header-banner h-100">
                    <img src="/static/img/header-img.jpg" class="img-fluid w-100 h-100" style="object-fit: cover;"
                        alt="Image">
                    <div class="carousel-banner-offer">
                        <p class="bg-primary text-white rounded fs-5 py-2 px-4 mb-0 me-3">Save $48.00</p>
                        <p class="text-primary fs-5 fw-bold mb-0">Special Offer</p>
                    </div>
                    <div class="carousel-banner">
                        <div class="carousel-banner-content text-center p-4">
                            <a href="#" class="d-block mb-2">SmartPhone</a>
                            <a href="#" class="d-block text-white fs-3">Apple iPad Mini <br> G2356</a>
                            <del class="me-2 text-white fs-5">$1,250.00</del>
                            <span class="text-primary fs-5">$1,050.00</span>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Carousel End -->

    <!-- Searvices Start -->
    <div class="container-fluid px-0">
        <div class="row g-0">
            <div class="col-6 col-md-4 col-lg-2 border-start border-end wow fadeInUp" data-wow-delay="0.1s">
                <div class="p-4">
                    <div class="d-inline-flex align-items-center">
                        <i class="fa fa-sync-alt fa-2x text-primary"></i>
                        <div class="ms-4">
                            <h6 class="text-uppercase mb-2">Free Return</h6>
                            <p class="mb-0">30 days money back guarantee!</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-4 col-lg-2 border-end wow fadeInUp" data-wow-delay="0.2s">
                <div class="p-4">
                    <div class="d-flex align-items-center">
                        <i class="fab fa-telegram-plane fa-2x text-primary"></i>
                        <div class="ms-4">
                            <h6 class="text-uppercase mb-2">Free Shipping</h6>
                            <p class="mb-0">Free shipping on all order</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-4 col-lg-2 border-end wow fadeInUp" data-wow-delay="0.3s">
                <div class="p-4">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-life-ring fa-2x text-primary"></i>
                        <div class="ms-4">
                            <h6 class="text-uppercase mb-2">Support 24/7</h6>
                            <p class="mb-0">We support online 24 hrs a day</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-4 col-lg-2 border-end wow fadeInUp" data-wow-delay="0.4s">
                <div class="p-4">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-credit-card fa-2x text-primary"></i>
                        <div class="ms-4">
                            <h6 class="text-uppercase mb-2">Receive Gift Card</h6>
                            <p class="mb-0">Recieve gift all over oder $50</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-4 col-lg-2 border-end wow fadeInUp" data-wow-delay="0.5s">
                <div class="p-4">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-lock fa-2x text-primary"></i>
                        <div class="ms-4">
                            <h6 class="text-uppercase mb-2">Secure Payment</h6>
                            <p class="mb-0">We Value Your Security</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-4 col-lg-2 border-end wow fadeInUp" data-wow-delay="0.6s">
                <div class="p-4">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-blog fa-2x text-primary"></i>
                        <div class="ms-4">
                            <h6 class="text-uppercase mb-2">Online Service</h6>
                            <p class="mb-0">Free return products in 30 days</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Searvices End -->

    <!-- Products Offer Start -->
    <div class="container-fluid bg-light py-5">
        <div class="container">
            <div class="row g-4" id="productsOfferContainer">
                <!-- Products loaded dynamically from Qdrant Cloud -->
                <div class="col-lg-6 wow fadeInLeft" data-wow-delay="0.2s">
                    <div class="d-flex align-items-center justify-content-center border bg-white rounded p-4"
                        style="min-height: 200px;">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 wow fadeInRight" data-wow-delay="0.3s">
                    <div class="d-flex align-items-center justify-content-center border bg-white rounded p-4"
                        style="min-height: 200px;">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Products Offer End -->


    <!-- Our Products Start -->
    <div class="container-fluid product py-5">
        <div class="container py-5">
            <div class="tab-class">
                <div class="row g-4">
                    <div class="col-lg-4 text-start wow fadeInLeft" data-wow-delay="0.1s">
                        <h1>Our Products</h1>
                        <p class="text-muted">Loaded dynamically from Qdrant Cloud</p>
                    </div>
                    <div class="col-lg-8 text-end wow fadeInRight" data-wow-delay="0.1s">
                        <ul class="nav nav-pills d-inline-flex text-center mb-5">
                            <li class="nav-item mb-4">
                                <a class="d-flex mx-2 py-2 bg-light rounded-pill active" data-bs-toggle="pill"
                                    href="#tab-1" onclick="loadTab('tab-1', null)">
                                    <span class="text-dark" style="width: 130px;">All Products</span>
                                </a>
                            </li>
                            <li class="nav-item mb-4">
                                <a class="d-flex py-2 mx-2 bg-light rounded-pill" data-bs-toggle="pill" href="#tab-2"
                                    onclick="loadTab('tab-2', 'Electronics')">
                                    <span class="text-dark" style="width: 130px;">Electronics</span>
                                </a>
                            </li>
                            <li class="nav-item mb-4">
                                <a class="d-flex mx-2 py-2 bg-light rounded-pill" data-bs-toggle="pill" href="#tab-3"
                                    onclick="loadTab('tab-3', 'Fashion')">
                                    <span class="text-dark" style="width: 130px;">Fashion</span>
                                </a>
                            </li>
                            <li class="nav-item mb-4">
                                <a class="d-flex mx-2 py-2 bg-light rounded-pill" data-bs-toggle="pill" href="#tab-4"
                                    onclick="loadTab('tab-4', 'Decoration')">
                                    <span class="text-dark" style="width: 130px;">Decoration</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="tab-content">
                    <!-- Tab 1: All Products -->
                    <div id="tab-1" class="tab-pane fade show p-0 active">
                        <div id="loadingSpinner-1" class="text-center py-5">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                            <p class="mt-2 text-muted">Loading products from Qdrant Cloud...</p>
                        </div>
                        <div id="resultsGrid-1" class="row g-4">
                            <!-- Products loaded dynamically from Qdrant -->
                        </div>
                    </div>
                    <!-- Tab 2: Electronics -->
                    <div id="tab-2" class="tab-pane fade p-0" role="tabpanel">
                        <div id="loadingSpinner-2" class="text-center py-5">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                            <p class="mt-2 text-muted">Loading Electronics...</p>
                        </div>
                        <div id="resultsGrid-2" class="row g-4">
                            <!-- Electronics loaded dynamically from Qdrant -->
                        </div>
                    </div>
                    <!-- Tab 3: Fashion -->
                    <div id="tab-3" class="tab-pane fade p-0" role="tabpanel">
                        <div id="loadingSpinner-3" class="text-center py-5">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                            <p class="mt-2 text-muted">Loading Fashion...</p>
                        </div>
                        <div id="resultsGrid-3" class="row g-4">
                            <!-- Fashion loaded dynamically from Qdrant -->
                        </div>
                    </div>
                    <!-- Tab 4: Decoration -->
                    <div id="tab-4" class="tab-pane fade p-0">
                        <div id="loadingSpinner-4" class="text-center py-5">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                            <p class="mt-2 text-muted">Loading Decoration...</p>
                        </div>
                        <div id="resultsGrid-4" class="row g-4">
                            <!-- Decoration loaded dynamically from Qdrant -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Our Products End -->

    <!-- Product Banner Start -->
    <div class="container-fluid py-5">
        <div class="container">
            <div class="row g-4" id="bannerContainer">
                <div class="col-lg-6 wow fadeInLeft" data-wow-delay="0.1s">
                    <a href="#">
                        <div class="bg-primary rounded position-relative">
                            <img src="/static/img/product-banner.jpg" class="img-fluid w-100 rounded" alt="">
                            <div class="position-absolute top-0 start-0 w-100 h-100 d-flex flex-column justify-content-center rounded p-4"
                                style="background: rgba(255, 255, 255, 0.5);">
                                <h3 class="display-5 text-primary">EOS Rebel <br> <span>T7i Kit</span></h3>
                                <p class="fs-4 text-muted">$899.99</p>
                                <a href="#" class="btn btn-primary rounded-pill align-self-start py-2 px-4">Shop Now</a>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="col-lg-6 wow fadeInRight" data-wow-delay="0.2s">
                    <a href="#">
                        <div class="text-center bg-primary rounded position-relative">
                            <img src="/static/img/product-banner-2.jpg" class="img-fluid w-100" alt="">
                            <div class="position-absolute top-0 start-0 w-100 h-100 d-flex flex-column justify-content-center rounded p-4"
                                style="background: rgba(242, 139, 0, 0.5);">
                                <h2 class="display-2 text-secondary">SALE</h2>
                                <h4 class="display-5 text-white mb-4">Get UP To 50% Off</h4>
                                <a href="#" class="btn btn-secondary rounded-pill align-self-center py-2 px-4">Shop
                                    Now</a>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <!-- Product Banner End -->

    <!-- Product List Satrt -->
    <div class="container-fluid products productList overflow-hidden">
        <div class="container products-mini py-5">
            <div class="mx-auto text-center mb-5" style="max-width: 900px;">
                <h4 class="text-primary border-bottom border-primary border-2 d-inline-block p-2 title-border-radius wow fadeInUp"
                    data-wow-delay="0.1s">Products</h4>
                <h1 class="mb-0 display-3 wow fadeInUp" data-wow-delay="0.3s">All Product Items</h1>
            </div>
            <div class="productList-carousel owl-carousel pt-4 wow fadeInUp" data-wow-delay="0.3s"
                id="productListCarousel">
                <div class="productImg-carousel owl-carousel productList-item">
                    <div class="productImg-item products-mini-item border">
                        <div class="row g-0">
                            <div class="col-5">
                                <div class="products-mini-img border-end h-100">
                                    <img src="/static/img/product-4.png" class="img-fluid w-100 h-100" alt="Image">
                                    <div class="products-mini-icon rounded-circle bg-primary">
                                        <a href="#"><i class="fa fa-eye fa-1x text-white"></i></a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-7">
                                <div class="products-mini-content p-3">
                                    <a href="#" class="d-block mb-2">SmartPhone</a>
                                    <a href="#" class="d-block h4">Apple iPad Mini <br> G2356</a>
                                    <del class="me-2 fs-5">$1,250.00</del>
                                    <span class="text-primary fs-5">$1,050.00</span>
                                </div>
                            </div>
                        </div>
                        <div class="products-mini-add border p-3">
                            <a href="#" class="btn btn-primary border-secondary rounded-pill py-2 px-4"><i
                                    class="fas fa-shopping-cart me-2"></i> Add To Cart</a>
                            <div class="d-flex">
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-3"><span
                                        class="rounded-circle btn-sm-square border"><i
                                            class="fas fa-random"></i></i></a>
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-0"><span
                                        class="rounded-circle btn-sm-square border"><i class="fas fa-heart"></i></a>
                            </div>
                        </div>
                    </div>
                    <div class="productImg-item products-mini-item border">
                        <div class="row g-0">
                            <div class="col-5">
                                <div class="products-mini-img border-end h-100">
                                    <img src="/static/img/product-4.png" class="img-fluid w-100 h-100" alt="Image">
                                    <div class="products-mini-icon rounded-circle bg-primary">
                                        <a href="#"><i class="fa fa-eye fa-1x text-white"></i></a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-7">
                                <div class="products-mini-content p-3">
                                    <a href="#" class="d-block mb-2">SmartPhone</a>
                                    <a href="#" class="d-block h4">Apple iPad Mini <br> G2356</a>
                                    <del class="me-2 fs-5">$1,250.00</del>
                                    <span class="text-primary fs-5">$1,050.00</span>
                                </div>
                            </div>
                        </div>
                        <div class="products-mini-add border p-3">
                            <a href="#" class="btn btn-primary border-secondary rounded-pill py-2 px-4"><i
                                    class="fas fa-shopping-cart me-2"></i> Add To Cart</a>
                            <div class="d-flex">
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-3"><span
                                        class="rounded-circle btn-sm-square border"><i
                                            class="fas fa-random"></i></i></a>
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-0"><span
                                        class="rounded-circle btn-sm-square border"><i class="fas fa-heart"></i></a>
                            </div>
                        </div>
                    </div>
                    <div class="productImg-item products-mini-item border">
                        <div class="row g-0">
                            <div class="col-5">
                                <div class="products-mini-img border-end h-100">
                                    <img src="/static/img/product-6.png" class="img-fluid w-100 h-100" alt="Image">
                                    <div class="products-mini-icon rounded-circle bg-primary">
                                        <a href="#"><i class="fa fa-eye fa-1x text-white"></i></a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-7">
                                <div class="products-mini-content p-3">
                                    <a href="#" class="d-block mb-2">SmartPhone</a>
                                    <a href="#" class="d-block h4">Apple iPad Mini <br> G2356</a>
                                    <del class="me-2 fs-5">$1,250.00</del>
                                    <span class="text-primary fs-5">$1,050.00</span>
                                </div>
                            </div>
                        </div>
                        <div class="products-mini-add border p-3">
                            <a href="#" class="btn btn-primary border-secondary rounded-pill py-2 px-4"><i
                                    class="fas fa-shopping-cart me-2"></i> Add To Cart</a>
                            <div class="d-flex">
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-3"><span
                                        class="rounded-circle btn-sm-square border"><i
                                            class="fas fa-random"></i></i></a>
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-0"><span
                                        class="rounded-circle btn-sm-square border"><i class="fas fa-heart"></i></a>
                            </div>
                        </div>
                    </div>
                    <div class="productImg-item products-mini-item border">
                        <div class="row g-0">
                            <div class="col-5">
                                <div class="products-mini-img border-end h-100">
                                    <img src="/static/img/product-7.png" class="img-fluid w-100 h-100" alt="Image">
                                    <div class="products-mini-icon rounded-circle bg-primary">
                                        <a href="#"><i class="fa fa-eye fa-1x text-white"></i></a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-7">
                                <div class="products-mini-content p-3">
                                    <a href="#" class="d-block mb-2">SmartPhone</a>
                                    <a href="#" class="d-block h4">Apple iPad Mini <br> G2356</a>
                                    <del class="me-2 fs-5">$1,250.00</del>
                                    <span class="text-primary fs-5">$1,050.00</span>
                                </div>
                            </div>
                        </div>
                        <div class="products-mini-add border p-3">
                            <a href="#" class="btn btn-primary border-secondary rounded-pill py-2 px-4"><i
                                    class="fas fa-shopping-cart me-2"></i> Add To Cart</a>
                            <div class="d-flex">
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-3"><span
                                        class="rounded-circle btn-sm-square border"><i
                                            class="fas fa-random"></i></i></a>
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-0"><span
                                        class="rounded-circle btn-sm-square border"><i class="fas fa-heart"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="productImg-carousel owl-carousel productList-item">
                    <div class="productImg-item products-mini-item border">
                        <div class="row g-0">
                            <div class="col-5">
                                <div class="products-mini-img border-end h-100">
                                    <img src="/static/img/product-8.png" class="img-fluid w-100 h-100" alt="Image">
                                    <div class="products-mini-icon rounded-circle bg-primary">
                                        <a href="#"><i class="fa fa-eye fa-1x text-white"></i></a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-7">
                                <div class="products-mini-content p-3">
                                    <a href="#" class="d-block mb-2">SmartPhone</a>
                                    <a href="#" class="d-block h4">Apple iPad Mini <br> G2356</a>
                                    <del class="me-2 fs-5">$1,250.00</del>
                                    <span class="text-primary fs-5">$1,050.00</span>
                                </div>
                            </div>
                        </div>
                        <div class="products-mini-add border p-3">
                            <a href="#" class="btn btn-primary border-secondary rounded-pill py-2 px-4"><i
                                    class="fas fa-shopping-cart me-2"></i> Add To Cart</a>
                            <div class="d-flex">
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-3"><span
                                        class="rounded-circle btn-sm-square border"><i
                                            class="fas fa-random"></i></i></a>
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-0"><span
                                        class="rounded-circle btn-sm-square border"><i class="fas fa-heart"></i></a>
                            </div>
                        </div>
                    </div>
                    <div class="productImg-item products-mini-item border">
                        <div class="row g-0">
                            <div class="col-5">
                                <div class="products-mini-img border-end h-100">
                                    <img src="/static/img/product-9.png" class="img-fluid w-100 h-100" alt="Image">
                                    <div class="products-mini-icon rounded-circle bg-primary">
                                        <a href="#"><i class="fa fa-eye fa-1x text-white"></i></a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-7">
                                <div class="products-mini-content p-3">
                                    <a href="#" class="d-block mb-2">SmartPhone</a>
                                    <a href="#" class="d-block h4">Apple iPad Mini <br> G2356</a>
                                    <del class="me-2 fs-5">$1,250.00</del>
                                    <span class="text-primary fs-5">$1,050.00</span>
                                </div>
                            </div>
                        </div>
                        <div class="products-mini-add border p-3">
                            <a href="#" class="btn btn-primary border-secondary rounded-pill py-2 px-4"><i
                                    class="fas fa-shopping-cart me-2"></i> Add To Cart</a>
                            <div class="d-flex">
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-3"><span
                                        class="rounded-circle btn-sm-square border"><i
                                            class="fas fa-random"></i></i></a>
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-0"><span
                                        class="rounded-circle btn-sm-square border"><i class="fas fa-heart"></i></a>
                            </div>
                        </div>
                    </div>
                    <div class="productImg-item products-mini-item border">
                        <div class="row g-0">
                            <div class="col-5">
                                <div class="products-mini-img border-end h-100">
                                    <img src="/static/img/product-10.png" class="img-fluid w-100 h-100" alt="Image">
                                    <div class="products-mini-icon rounded-circle bg-primary">
                                        <a href="#"><i class="fa fa-eye fa-1x text-white"></i></a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-7">
                                <div class="products-mini-content p-3">
                                    <a href="#" class="d-block mb-2">SmartPhone</a>
                                    <a href="#" class="d-block h4">Apple iPad Mini <br> G2356</a>
                                    <del class="me-2 fs-5">$1,250.00</del>
                                    <span class="text-primary fs-5">$1,050.00</span>
                                </div>
                            </div>
                        </div>
                        <div class="products-mini-add border p-3">
                            <a href="#" class="btn btn-primary border-secondary rounded-pill py-2 px-4"><i
                                    class="fas fa-shopping-cart me-2"></i> Add To Cart</a>
                            <div class="d-flex">
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-3"><span
                                        class="rounded-circle btn-sm-square border"><i
                                            class="fas fa-random"></i></i></a>
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-0"><span
                                        class="rounded-circle btn-sm-square border"><i class="fas fa-heart"></i></a>
                            </div>
                        </div>
                    </div>
                    <div class="productImg-item products-mini-item border">
                        <div class="row g-0">
                            <div class="col-5">
                                <div class="products-mini-img border-end h-100">
                                    <img src="/static/img/product-11.png" class="img-fluid w-100 h-100" alt="Image">
                                    <div class="products-mini-icon rounded-circle bg-primary">
                                        <a href="#"><i class="fa fa-eye fa-1x text-white"></i></a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-7">
                                <div class="products-mini-content p-3">
                                    <a href="#" class="d-block mb-2">SmartPhone</a>
                                    <a href="#" class="d-block h4">Apple iPad Mini <br> G2356</a>
                                    <del class="me-2 fs-5">$1,250.00</del>
                                    <span class="text-primary fs-5">$1,050.00</span>
                                </div>
                            </div>
                        </div>
                        <div class="products-mini-add border p-3">
                            <a href="#" class="btn btn-primary border-secondary rounded-pill py-2 px-4"><i
                                    class="fas fa-shopping-cart me-2"></i> Add To Cart</a>
                            <div class="d-flex">
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-3"><span
                                        class="rounded-circle btn-sm-square border"><i
                                            class="fas fa-random"></i></i></a>
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-0"><span
                                        class="rounded-circle btn-sm-square border"><i class="fas fa-heart"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="productImg-carousel owl-carousel productList-item">
                    <div class="productImg-item products-mini-item border">
                        <div class="row g-0">
                            <div class="col-5">
                                <div class="products-mini-img border-end h-100">
                                    <img src="/static/img/product-12.png" class="img-fluid w-100 h-100" alt="Image">
                                    <div class="products-mini-icon rounded-circle bg-primary">
                                        <a href="#"><i class="fa fa-eye fa-1x text-white"></i></a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-7">
                                <div class="products-mini-content p-3">
                                    <a href="#" class="d-block mb-2">SmartPhone</a>
                                    <a href="#" class="d-block h4">Apple iPad Mini <br> G2356</a>
                                    <del class="me-2 fs-5">$1,250.00</del>
                                    <span class="text-primary fs-5">$1,050.00</span>
                                </div>
                            </div>
                        </div>
                        <div class="products-mini-add border p-3">
                            <a href="#" class="btn btn-primary border-secondary rounded-pill py-2 px-4"><i
                                    class="fas fa-shopping-cart me-2"></i> Add To Cart</a>
                            <div class="d-flex">
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-3"><span
                                        class="rounded-circle btn-sm-square border"><i
                                            class="fas fa-random"></i></i></a>
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-0"><span
                                        class="rounded-circle btn-sm-square border"><i class="fas fa-heart"></i></a>
                            </div>
                        </div>
                    </div>
                    <div class="productImg-item products-mini-item border">
                        <div class="row g-0">
                            <div class="col-5">
                                <div class="products-mini-img border-end h-100">
                                    <img src="/static/img/product-13.png" class="img-fluid w-100 h-100" alt="Image">
                                    <div class="products-mini-icon rounded-circle bg-primary">
                                        <a href="#"><i class="fa fa-eye fa-1x text-white"></i></a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-7">
                                <div class="products-mini-content p-3">
                                    <a href="#" class="d-block mb-2">SmartPhone</a>
                                    <a href="#" class="d-block h4">Apple iPad Mini <br> G2356</a>
                                    <del class="me-2 fs-5">$1,250.00</del>
                                    <span class="text-primary fs-5">$1,050.00</span>
                                </div>
                            </div>
                        </div>
                        <div class="products-mini-add border p-3">
                            <a href="#" class="btn btn-primary border-secondary rounded-pill py-2 px-4"><i
                                    class="fas fa-shopping-cart me-2"></i> Add To Cart</a>
                            <div class="d-flex">
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-3"><span
                                        class="rounded-circle btn-sm-square border"><i
                                            class="fas fa-random"></i></i></a>
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-0"><span
                                        class="rounded-circle btn-sm-square border"><i class="fas fa-heart"></i></a>
                            </div>
                        </div>
                    </div>
                    <div class="productImg-item products-mini-item border">
                        <div class="row g-0">
                            <div class="col-5">
                                <div class="products-mini-img border-end h-100">
                                    <img src="/static/img/product-14.png" class="img-fluid w-100 h-100" alt="Image">
                                    <div class="products-mini-icon rounded-circle bg-primary">
                                        <a href="#"><i class="fa fa-eye fa-1x text-white"></i></a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-7">
                                <div class="products-mini-content p-3">
                                    <a href="#" class="d-block mb-2">SmartPhone</a>
                                    <a href="#" class="d-block h4">Apple iPad Mini <br> G2356</a>
                                    <del class="me-2 fs-5">$1,250.00</del>
                                    <span class="text-primary fs-5">$1,050.00</span>
                                </div>
                            </div>
                        </div>
                        <div class="products-mini-add border p-3">
                            <a href="#" class="btn btn-primary border-secondary rounded-pill py-2 px-4"><i
                                    class="fas fa-shopping-cart me-2"></i> Add To Cart</a>
                            <div class="d-flex">
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-3"><span
                                        class="rounded-circle btn-sm-square border"><i
                                            class="fas fa-random"></i></i></a>
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-0"><span
                                        class="rounded-circle btn-sm-square border"><i class="fas fa-heart"></i></a>
                            </div>
                        </div>
                    </div>
                    <div class="productImg-item products-mini-item border">
                        <div class="row g-0">
                            <div class="col-5">
                                <div class="products-mini-img border-end h-100">
                                    <img src="/static/img/product-15.png" class="img-fluid w-100 h-100" alt="Image">
                                    <div class="products-mini-icon rounded-circle bg-primary">
                                        <a href="#"><i class="fa fa-eye fa-1x text-white"></i></a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-7">
                                <div class="products-mini-content p-3">
                                    <a href="#" class="d-block mb-2">SmartPhone</a>
                                    <a href="#" class="d-block h4">Apple iPad Mini <br> G2356</a>
                                    <del class="me-2 fs-5">$1,250.00</del>
                                    <span class="text-primary fs-5">$1,050.00</span>
                                </div>
                            </div>
                        </div>
                        <div class="products-mini-add border p-3">
                            <a href="#" class="btn btn-primary border-secondary rounded-pill py-2 px-4"><i
                                    class="fas fa-shopping-cart me-2"></i> Add To Cart</a>
                            <div class="d-flex">
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-3"><span
                                        class="rounded-circle btn-sm-square border"><i
                                            class="fas fa-random"></i></i></a>
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-0"><span
                                        class="rounded-circle btn-sm-square border"><i class="fas fa-heart"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="productImg-carousel owl-carousel productList-item">
                    <div class="productImg-item products-mini-item border">
                        <div class="row g-0">
                            <div class="col-5">
                                <div class="products-mini-img border-end h-100">
                                    <img src="/static/img/product-16.png" class="img-fluid w-100 h-100" alt="Image">
                                    <div class="products-mini-icon rounded-circle bg-primary">
                                        <a href="#"><i class="fa fa-eye fa-1x text-white"></i></a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-7">
                                <div class="products-mini-content p-3">
                                    <a href="#" class="d-block mb-2">SmartPhone</a>
                                    <a href="#" class="d-block h4">Apple iPad Mini <br> G2356</a>
                                    <del class="me-2 fs-5">$1,250.00</del>
                                    <span class="text-primary fs-5">$1,050.00</span>
                                </div>
                            </div>
                        </div>
                        <div class="products-mini-add border p-3">
                            <a href="#" class="btn btn-primary border-secondary rounded-pill py-2 px-4"><i
                                    class="fas fa-shopping-cart me-2"></i> Add To Cart</a>
                            <div class="d-flex">
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-3"><span
                                        class="rounded-circle btn-sm-square border"><i
                                            class="fas fa-random"></i></i></a>
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-0"><span
                                        class="rounded-circle btn-sm-square border"><i class="fas fa-heart"></i></a>
                            </div>
                        </div>
                    </div>
                    <div class="productImg-item products-mini-item border">
                        <div class="row g-0">
                            <div class="col-5">
                                <div class="products-mini-img border-end h-100">
                                    <img src="/static/img/product-17.png" class="img-fluid w-100 h-100" alt="Image">
                                    <div class="products-mini-icon rounded-circle bg-primary">
                                        <a href="#"><i class="fa fa-eye fa-1x text-white"></i></a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-7">
                                <div class="products-mini-content p-3">
                                    <a href="#" class="d-block mb-2">SmartPhone</a>
                                    <a href="#" class="d-block h4">Apple iPad Mini <br> G2356</a>
                                    <del class="me-2 fs-5">$1,250.00</del>
                                    <span class="text-primary fs-5">$1,050.00</span>
                                </div>
                            </div>
                        </div>
                        <div class="products-mini-add border p-3">
                            <a href="#" class="btn btn-primary border-secondary rounded-pill py-2 px-4"><i
                                    class="fas fa-shopping-cart me-2"></i> Add To Cart</a>
                            <div class="d-flex">
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-3"><span
                                        class="rounded-circle btn-sm-square border"><i
                                            class="fas fa-random"></i></i></a>
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-0"><span
                                        class="rounded-circle btn-sm-square border"><i class="fas fa-heart"></i></a>
                            </div>
                        </div>
                    </div>
                    <div class="productImg-item products-mini-item border">
                        <div class="row g-0">
                            <div class="col-5">
                                <div class="products-mini-img border-end h-100">
                                    <img src="/static/img/product-3.png" class="img-fluid w-100 h-100" alt="Image">
                                    <div class="products-mini-icon rounded-circle bg-primary">
                                        <a href="#"><i class="fa fa-eye fa-1x text-white"></i></a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-7">
                                <div class="products-mini-content p-3">
                                    <a href="#" class="d-block mb-2">SmartPhone</a>
                                    <a href="#" class="d-block h4">Apple iPad Mini <br> G2356</a>
                                    <del class="me-2 fs-5">$1,250.00</del>
                                    <span class="text-primary fs-5">$1,050.00</span>
                                </div>
                            </div>
                        </div>
                        <div class="products-mini-add border p-3">
                            <a href="#" class="btn btn-primary border-secondary rounded-pill py-2 px-4"><i
                                    class="fas fa-shopping-cart me-2"></i> Add To Cart</a>
                            <div class="d-flex">
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-3"><span
                                        class="rounded-circle btn-sm-square border"><i
                                            class="fas fa-random"></i></i></a>
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-0"><span
                                        class="rounded-circle btn-sm-square border"><i class="fas fa-heart"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Product List End -->

    <!-- Bestseller Products Start -->
    <div class="container-fluid products pb-5">
        <div class="container products-mini py-5">
            <div class="mx-auto text-center mb-5" style="max-width: 700px;">
                <h4 class="text-primary mb-4 border-bottom border-primary border-2 d-inline-block p-2 title-border-radius wow fadeInUp"
                    data-wow-delay="0.1s">Bestseller Products</h4>
                <p class="mb-0 wow fadeInUp" data-wow-delay="0.2s">Lorem ipsum dolor sit amet consectetur adipisicing
                    elit. Modi, asperiores ducimus sint quos tempore officia similique quia? Libero, pariatur
                    consectetur?</p>
            </div>
            <div class="row g-4" id="bestsellersContainer">
                <div class="col-md-6 col-lg-6 col-xl-4 wow fadeInUp" data-wow-delay="0.1s">
                    <div class="products-mini-item border">
                        <div class="row g-0">
                            <div class="col-5">
                                <div class="products-mini-img border-end h-100">
                                    <img src="/static/img/product-3.png" class="img-fluid w-100 h-100" alt="Image">
                                    <div class="products-mini-icon rounded-circle bg-primary">
                                        <a href="#"><i class="fa fa-eye fa-1x text-white"></i></a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-7">
                                <div class="products-mini-content p-3">
                                    <a href="#" class="d-block mb-2">SmartPhone</a>
                                    <a href="#" class="d-block h4">Apple iPad Mini <br> G2356</a>
                                    <del class="me-2 fs-5">$1,250.00</del>
                                    <span class="text-primary fs-5">$1,050.00</span>
                                </div>
                            </div>
                        </div>
                        <div class="products-mini-add border p-3">
                            <a href="#" class="btn btn-primary border-secondary rounded-pill py-2 px-4"><i
                                    class="fas fa-shopping-cart me-2"></i> Add To Cart</a>
                            <div class="d-flex">
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-3"><span
                                        class="rounded-circle btn-sm-square border"><i
                                            class="fas fa-random"></i></i></a>
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-0"><span
                                        class="rounded-circle btn-sm-square border"><i class="fas fa-heart"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-6 col-xl-4 wow fadeInUp" data-wow-delay="0.3s">
                    <div class="products-mini-item border">
                        <div class="row g-0">
                            <div class="col-5">
                                <div class="products-mini-img border-end h-100">
                                    <img src="/static/img/product-4.png" class="img-fluid w-100 h-100" alt="Image">
                                    <div class="products-mini-icon rounded-circle bg-primary">
                                        <a href="#"><i class="fa fa-eye fa-1x text-white"></i></a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-7">
                                <div class="products-mini-content p-3">
                                    <a href="#" class="d-block mb-2">SmartPhone</a>
                                    <a href="#" class="d-block h4">Apple iPad Mini <br> G2356</a>
                                    <del class="me-2 fs-5">$1,250.00</del>
                                    <span class="text-primary fs-5">$1,050.00</span>
                                </div>
                            </div>
                        </div>
                        <div class="products-mini-add border p-3">
                            <a href="#" class="btn btn-primary border-secondary rounded-pill py-2 px-4"><i
                                    class="fas fa-shopping-cart me-2"></i> Add To Cart</a>
                            <div class="d-flex">
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-3"><span
                                        class="rounded-circle btn-sm-square border"><i
                                            class="fas fa-random"></i></i></a>
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-0"><span
                                        class="rounded-circle btn-sm-square border"><i class="fas fa-heart"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-6 col-xl-4 wow fadeInUp" data-wow-delay="0.5s">
                    <div class="products-mini-item border">
                        <div class="row g-0">
                            <div class="col-5">
                                <div class="products-mini-img border-end h-100">
                                    <img src="/static/img/product-5.png" class="img-fluid w-100 h-100" alt="Image">
                                    <div class="products-mini-icon rounded-circle bg-primary">
                                        <a href="#"><i class="fa fa-eye fa-1x text-white"></i></a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-7">
                                <div class="products-mini-content p-3">
                                    <a href="#" class="d-block mb-2">SmartPhone</a>
                                    <a href="#" class="d-block h4">Apple iPad Mini <br> G2356</a>
                                    <del class="me-2 fs-5">$1,250.00</del>
                                    <span class="text-primary fs-5">$1,050.00</span>
                                </div>
                            </div>
                        </div>
                        <div class="products-mini-add border p-3">
                            <a href="#" class="btn btn-primary border-secondary rounded-pill py-2 px-4"><i
                                    class="fas fa-shopping-cart me-2"></i> Add To Cart</a>
                            <div class="d-flex">
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-3"><span
                                        class="rounded-circle btn-sm-square border"><i
                                            class="fas fa-random"></i></i></a>
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-0"><span
                                        class="rounded-circle btn-sm-square border"><i class="fas fa-heart"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-6 col-xl-4 wow fadeInUp" data-wow-delay="0.1s">
                    <div class="products-mini-item border">
                        <div class="row g-0">
                            <div class="col-5">
                                <div class="products-mini-img border-end h-100">
                                    <img src="/static/img/product-6.png" class="img-fluid w-100 h-100" alt="Image">
                                    <div class="products-mini-icon rounded-circle bg-primary">
                                        <a href="#"><i class="fa fa-eye fa-1x text-white"></i></a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-7">
                                <div class="products-mini-content p-3">
                                    <a href="#" class="d-block mb-2">SmartPhone</a>
                                    <a href="#" class="d-block h4">Apple iPad Mini <br> G2356</a>
                                    <del class="me-2 fs-5">$1,250.00</del>
                                    <span class="text-primary fs-5">$1,050.00</span>
                                </div>
                            </div>
                        </div>
                        <div class="products-mini-add border p-3">
                            <a href="#" class="btn btn-primary border-secondary rounded-pill py-2 px-4"><i
                                    class="fas fa-shopping-cart me-2"></i> Add To Cart</a>
                            <div class="d-flex">
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-3"><span
                                        class="rounded-circle btn-sm-square border"><i
                                            class="fas fa-random"></i></i></a>
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-0"><span
                                        class="rounded-circle btn-sm-square border"><i class="fas fa-heart"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-6 col-xl-4 wow fadeInUp" data-wow-delay="0.3s">
                    <div class="products-mini-item border">
                        <div class="row g-0">
                            <div class="col-5">
                                <div class="products-mini-img border-end h-100">
                                    <img src="/static/img/product-7.png" class="img-fluid w-100 h-100" alt="Image">
                                    <div class="products-mini-icon rounded-circle bg-primary">
                                        <a href="#"><i class="fa fa-eye fa-1x text-white"></i></a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-7">
                                <div class="products-mini-content p-3">
                                    <a href="#" class="d-block mb-2">SmartPhone</a>
                                    <a href="#" class="d-block h4">Apple iPad Mini <br> G2356</a>
                                    <del class="me-2 fs-5">$1,250.00</del>
                                    <span class="text-primary fs-5">$1,050.00</span>
                                </div>
                            </div>
                        </div>
                        <div class="products-mini-add border p-3">
                            <a href="#" class="btn btn-primary border-secondary rounded-pill py-2 px-4"><i
                                    class="fas fa-shopping-cart me-2"></i> Add To Cart</a>
                            <div class="d-flex">
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-3"><span
                                        class="rounded-circle btn-sm-square border"><i
                                            class="fas fa-random"></i></i></a>
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-0"><span
                                        class="rounded-circle btn-sm-square border"><i class="fas fa-heart"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-6 col-xl-4 wow fadeInUp" data-wow-delay="0.5s">
                    <div class="products-mini-item border">
                        <div class="row g-0">
                            <div class="col-5">
                                <div class="products-mini-img border-end h-100">
                                    <img src="/static/img/product-11.png" class="img-fluid w-100 h-100" alt="Image">
                                    <div class="products-mini-icon rounded-circle bg-primary">
                                        <a href="#"><i class="fa fa-eye fa-1x text-white"></i></a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-7">
                                <div class="products-mini-content p-3">
                                    <a href="#" class="d-block mb-2">SmartPhone</a>
                                    <a href="#" class="d-block h4">Apple iPad Mini <br> G2356</a>
                                    <del class="me-2 fs-5">$1,250.00</del>
                                    <span class="text-primary fs-5">$1,050.00</span>
                                </div>
                            </div>
                        </div>
                        <div class="products-mini-add border p-3">
                            <a href="#" class="btn btn-primary border-secondary rounded-pill py-2 px-4"><i
                                    class="fas fa-shopping-cart me-2"></i> Add To Cart</a>
                            <div class="d-flex">
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-3"><span
                                        class="rounded-circle btn-sm-square border"><i
                                            class="fas fa-random"></i></i></a>
                                <a href="#"
                                    class="text-primary d-flex align-items-center justify-content-center me-0"><span
                                        class="rounded-circle btn-sm-square border"><i class="fas fa-heart"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Bestseller Products End -->


    <!-- Footer Start -->
    <div class="container-fluid footer py-5 wow fadeIn" data-wow-delay="0.2s">
        <div class="container py-5">
            <div class="row g-4 rounded mb-5" style="background: rgba(255, 255, 255, .03);">
                <div class="col-md-6 col-lg-6 col-xl-3">
                    <div class="rounded p-4">
                        <div class="rounded-circle bg-secondary d-flex align-items-center justify-content-center mb-4"
                            style="width: 70px; height: 70px;">
                            <i class="fas fa-map-marker-alt fa-2x text-primary"></i>
                        </div>
                        <div>
                            <h4 class="text-white">Address</h4>
                            <p class="mb-2">Hammam L'inf, Ben Arous, Tunisia</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-6 col-xl-3">
                    <div class="rounded p-4">
                        <div class="rounded-circle bg-secondary d-flex align-items-center justify-content-center mb-4"
                            style="width: 70px; height: 70px;">
                            <i class="fas fa-envelope fa-2x text-primary"></i>
                        </div>
                        <div>
                            <h4 class="text-white">Mail Us</h4>
                            <p class="mb-2">karim.mlayah@nexus.tn</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-6 col-xl-3">
                    <div class="rounded p-4">
                        <div class="rounded-circle bg-secondary d-flex align-items-center justify-content-center mb-4"
                            style="width: 70px; height: 70px;">
                            <i class="fa fa-phone-alt fa-2x text-primary"></i>
                        </div>
                        <div>
                            <h4 class="text-white">Telephone</h4>
                            <p class="mb-2">(+216) 24 567 890</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-6 col-xl-3">
                    <div class="rounded p-4">
                        <div class="rounded-circle bg-secondary d-flex align-items-center justify-content-center mb-4"
                            style="width: 70px; height: 70px;">
                            <i class="fab fa-firefox-browser fa-2x text-primary"></i>
                        </div>
                        <div>
                            <h4 class="text-white">Website</h4>
                            <p class="mb-2">nexus-ecommerce.tn</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row g-5">
                <div class="col-md-6 col-lg-6 col-xl-3">
                    <div class="footer-item d-flex flex-column">
                        <div class="footer-item">
                            <h4 class="text-primary mb-4">Newsletter</h4>
                            <p class="mb-3">Abonnez-vous pour recevoir les dernires offres et nouveauts de notre
                                boutique propulse par Qdrant Cloud.</p>
                            <div class="position-relative mx-auto rounded-pill">
                                <input class="form-control rounded-pill w-100 py-3 ps-4 pe-5" type="text"
                                    placeholder="Enter your email">
                                <button type="button"
                                    class="btn btn-primary rounded-pill position-absolute top-0 end-0 py-2 mt-2 me-2">SignUp</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-6 col-xl-3">
                    <div class="footer-item d-flex flex-column">
                        <h4 class="text-primary mb-4">Customer Service</h4>
                        <a href="#"><i class="fas fa-angle-right me-2"></i> Contact Us</a>
                        <a href="#"><i class="fas fa-angle-right me-2"></i> Returns</a>
                        <a href="#"><i class="fas fa-angle-right me-2"></i> Order History</a>
                        <a href="#"><i class="fas fa-angle-right me-2"></i> Site Map</a>
                    </div>
                </div>
                <div class="col-md-6 col-lg-6 col-xl-3">
                    <div class="footer-item d-flex flex-column">
                        <h4 class="text-primary mb-4">Information</h4>
                        <a href="#"><i class="fas fa-angle-right me-2"></i> About Us</a>
                        <a href="#"><i class="fas fa-angle-right me-2"></i> Delivery infomation</a>
                        <a href="#"><i class="fas fa-angle-right me-2"></i> Privacy Policy</a>
                        <a href="#"><i class="fas fa-angle-right me-2"></i> Terms & Conditions</a>
                    </div>
                </div>
                <div class="col-md-6 col-lg-6 col-xl-3">
                    <div class="footer-item d-flex flex-column">
                        <h4 class="text-primary mb-4">Account</h4>
                        <a href="#"><i class="fas fa-angle-right me-2"></i> My Account</a>
                        <a href="#"><i class="fas fa-angle-right me-2"></i> Wishlist</a>
                        <a href="#"><i class="fas fa-angle-right me-2"></i> Track Your Order</a>
                        <a href="#"><i class="fas fa-angle-right me-2"></i> Shop</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Footer End -->

    <!-- Copyright Start -->
    <div class="container-fluid copyright py-4">
        <div class="container">
            <div class="row g-4 align-items-center">
                <div class="col-md-6 text-center text-md-start mb-md-0">
                    <span class="text-white"><a href="#" class="border-bottom text-white"><i
                                class="fas fa-copyright text-light me-2"></i>Hackathon Nexus</a>, All right
                        reserved.</span>
                </div>
                <div class="col-md-6 text-center text-md-end text-white">
                    Designed By <a class="border-bottom text-white" href="https://htmlcodex.com">HTML Codex</a>
                </div>
            </div>
        </div>
    </div>
    <!-- Copyright End -->

    <!-- Back to Top -->
    <a href="#" class="btn btn-primary btn-lg-square back-to-top"><i class="fa fa-arrow-up"></i></a>

    <!-- AI Chatbot UI -->
    <div class="ai-chatbot-btn" onclick="toggleChat()" title="Ask our AI Assistant">
        <i class="fas fa-robot"></i>
    </div>

    <div class="chat-window" id="chatWindow">
        <div class="chat-header">
            <div class="d-flex align-items-center">
                <i class="fas fa-robot me-2"></i>
                <h5>FinFit AI Assistant</h5>
            </div>
            <div class="close-chat" onclick="toggleChat()">
                <i class="fas fa-times"></i>
            </div>
        </div>
        <div class="chat-body" id="chatBody">
            <div class="chat-message message-ai">
                Hello! I'm your FinFit assistant. How can I help you find the best electronics today?
            </div>
        </div>
        <div class="chat-footer">
            <div class="chat-input-group">
                <input type="text" id="chatInput" placeholder="Ask me anything..."
                    onkeypress="if(event.key === 'Enter') sendChatMessage()">
                <button class="send-btn" onclick="sendChatMessage()">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>


    <!-- JavaScript Libraries -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/static/lib/wow/wow.min.js"></script>
    <script src="/static/lib/owlcarousel/owl.carousel.min.js"></script>


    <!-- Template Javascript -->
    <script src="/static/js/main.js"></script>

    <!-- Integration Script -->
    <script>
        const API_BASE = (window.location.protocol === 'file:')
            ? 'http://localhost:8000'
            : window.location.origin;
        let selectedImageBase64 = null;

        function triggerImageUpload() {
            document.getElementById('imageInput').click();
        }

        // Voice Search Implementation
        function startVoiceSearch() {
            if (!('webkitSpeechRecognition' in window)) {
                alert("Voice search is not supported in this browser. Please use Chrome.");
                return;
            }

            const recognition = new webkitSpeechRecognition();
            recognition.lang = 'en-US'; // Default to English, could be dynamic
            recognition.interimResults = false;
            recognition.maxAlternatives = 1;

            const micIcon = document.getElementById('micIcon');
            micIcon.classList.remove('fa-microphone');
            micIcon.classList.add('fa-microphone-slash', 'text-danger');

            recognition.start();

            recognition.onresult = function (event) {
                const transcript = event.results[0][0].transcript;
                document.getElementById('searchInput').value = transcript;
                handleSearchClick(); // Trigger search automatically
            };

            recognition.onerror = function (event) {
                console.error('Voice search error:', event.error);
                alert('Voice search failed. Please try again.');
            };

            recognition.onend = function () {
                micIcon.classList.remove('fa-microphone-slash', 'text-danger');
                micIcon.classList.add('fa-microphone');
            };
        }

        // --- Cart & Wishlist Logic ---
        let cart = JSON.parse(localStorage.getItem('finfit_cart')) || [];
        let wishlist = JSON.parse(localStorage.getItem('finfit_wishlist')) || [];
        let renderedProductsCache = []; // To store current products for easy access

        function viewProduct(index) {
            const product = renderedProductsCache[index];
            if (!product) return;

            localStorage.setItem('finfit_selected_product', JSON.stringify(product));
            window.location.href = 'single.html';
        }

        function updateCounters() {
            const wishlistBadge = document.getElementById('wishlistBadge');
            const cartBadge = document.getElementById('cartBadge');
            const cartTotal = document.getElementById('cartTotal');

            // Update Wishlist
            if (wishlist.length > 0) {
                wishlistBadge.textContent = wishlist.length;
                wishlistBadge.style.display = 'block';
            } else {
                wishlistBadge.style.display = 'none';
            }

            // Update Cart
            const totalCount = cart.reduce((sum, item) => sum + item.quantity, 0);
            const totalPrice = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);

            if (totalCount > 0) {
                cartBadge.textContent = totalCount;
                cartBadge.style.display = 'block';
            } else {
                cartBadge.style.display = 'none';
            }

            cartTotal.textContent = '$' + totalPrice.toFixed(2);
        }

        function addToCart(index) {
            const product = renderedProductsCache[index];
            if (!product) return;

            const existingItem = cart.find(item => item.name === product.name); // Using name as ID for now
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    name: product.name,
                    price: product.price || product.final_price || 0,
                    image: product.image || (product.image_urls && product.image_urls[0]) || '/static/img/placeholder.png',
                    quantity: 1
                });
            }

            localStorage.setItem('finfit_cart', JSON.stringify(cart));
            updateCounters();
            showToast(`Added to cart: ${product.name}`);
        }

        function toggleWishlist(index) {
            const product = renderedProductsCache[index];
            if (!product) return;

            const existingIndex = wishlist.findIndex(item => item.name === product.name);
            if (existingIndex > -1) {
                wishlist.splice(existingIndex, 1);
                showToast(`Removed from favorites: ${product.name}`);
            } else {
                wishlist.push({
                    name: product.name,
                    price: product.price || product.final_price || 0,
                    image: product.image || (product.image_urls && product.image_urls[0]) || '/static/img/placeholder.png'
                });
                showToast(`Added to favorites: ${product.name}`);
            }

            localStorage.setItem('finfit_wishlist', JSON.stringify(wishlist));
            updateCounters();
        }

        function showToast(message) {
            // Create a simple toast container if it doesn't exist
            let container = document.getElementById('toast-container');
            if (!container) {
                container = document.createElement('div');
                container.id = 'toast-container';
                container.style.cssText = 'position: fixed; bottom: 20px; right: 20px; z-index: 9999;';
                document.body.appendChild(container);
            }

            const toast = document.createElement('div');
            toast.className = 'toast show align-items-center text-white bg-primary border-0 mb-2';
            toast.setAttribute('role', 'alert');
            toast.setAttribute('aria-live', 'assertive');
            toast.setAttribute('aria-atomic', 'true');
            toast.innerHTML = `
                <div class="d-flex">
                    <div class="toast-body">
                        ${message}
                    </div>
                    <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close" onclick="this.parentElement.parentElement.remove()"></button>
                </div>
            `;

            container.appendChild(toast);

            // Auto remove
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        // Initialize counters on load
        document.addEventListener('DOMContentLoaded', () => {
            updateCounters();
            updateCurrency(); // Initialize currency on load
        });

        // --- Currency Converter Logic ---
        const exchangeRates = {
            'USD': 1,
            'EUR': 0.92,
            'TND': 3.1
        };

        const currencySymbols = {
            'USD': '$',
            'EUR': '',
            'TND': 'DT'
        };

        function updateCurrency() {
            const currency = document.getElementById('currencySelector').value;
            const rate = exchangeRates[currency];
            const symbol = currencySymbols[currency];

            // 1. Update all price elements in the DOM
            document.querySelectorAll('.text-primary.fs-5.fw-bold, .product-price, .fs-4.text-muted, .fs-4.text-white').forEach(el => {
                // Store original USD price if not already stored
                if (!el.dataset.usdPrice) {
                    // Try to extract number from text
                    const match = el.textContent.match(/[\d\.,]+/);
                    if (match) {
                        el.dataset.usdPrice = parseFloat(match[0].replace(/,/g, ''));
                    }
                }

                if (el.dataset.usdPrice) {
                    const usdPrice = parseFloat(el.dataset.usdPrice);
                    const converted = (usdPrice * rate).toFixed(2);
                    el.textContent = `${symbol}${converted}`;
                }
            });

            // 2. Update specific cart totals if visible
            const cartTotal = document.getElementById('cartTotal');
            if (cartTotal) {
                // Recalculate based on cart state, not just text
                // ... handled by updateCounters actually, but we need to force re-render or handle it here
            }

            // Re-render components that might need it if simple text replacement isn't enough, 
            // but for now text replacement covers most static-ish content.
            // Future calls to renderResults will need to know the current currency.
        }

        // Override helper to format price
        function formatPrice(priceInUsd) {
            const currency = document.getElementById('currencySelector') ? document.getElementById('currencySelector').value : 'USD';
            const rate = exchangeRates[currency];
            const symbol = currencySymbols[currency];

            if (typeof priceInUsd !== 'number') return priceInUsd; // Fallback

            return `${symbol}${(priceInUsd * rate).toFixed(2)}`;
        }

        // --- End Currency Logic ---

        // --- End Logic ---

        // Handle image selection directly from the new camera icon
        function handleImageSelect(event) {
            const file = event.target.files[0];
            if (file) {
                // Set mode to image
                document.getElementById('searchMode').value = 'image';

                const reader = new FileReader();
                reader.onload = function (e) {
                    selectedImageBase64 = e.target.result;
                    // Trigger search immediately after selection
                    searchByImage();
                };
                reader.readAsDataURL(file);
            }
        }

        function handleSearchClick() {
            const query = document.getElementById('searchInput').value.trim();
            if (query) {
                document.getElementById('searchMode').value = 'text';
                search();
            } else if (selectedImageBase64) {
                // If no text but image is selected (edge case if they clicked uploads before)
                searchByImage();
            }
        }

        async function search() {
            const query = document.getElementById('searchInput').value.trim();
            if (!query) return;

            // Switch to tab-1 and show results there
            const tab1Link = document.querySelector('a[href="#tab-1"]');
            if (tab1Link) tab1Link.click();

            showLoading(true, '1');
            const grid = document.getElementById('resultsGrid-1');
            if (grid) grid.innerHTML = ''; // Clear previous results

            try {
                const response = await fetch(`${API_BASE}/search?q=${encodeURIComponent(query)}&limit=12&threshold=0.3`);
                const data = await response.json();

                // Show search context
                if (data.results && data.results.length > 0) {
                    renderResults(data.results, 'resultsGrid-1', `Search results for "${query}" (${data.count} found)`);
                    grid.scrollIntoView({ behavior: 'smooth', block: 'start' });
                } else {
                    grid.innerHTML = `
                        <div class="col-12 text-center py-5">
                            <i class="fas fa-search text-muted fa-3x mb-3"></i>
                            <h4 class="text-muted">No products found for "${query}"</h4>
                            <p class="text-muted">Try different keywords or browse categories</p>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('Search failed:', error);
                grid.innerHTML = `
                    <div class="col-12 text-center py-5">
                        <i class="fas fa-exclamation-triangle text-warning fa-3x mb-3"></i>
                        <h4 class="text-muted">Search failed</h4>
                        <p class="text-muted">Please try again</p>
                    </div>
                `;
            } finally {
                showLoading(false, '1');
            }
        }

        async function searchByImage() {
            if (!selectedImageBase64) {
                alert('Please choose an image first!');
                return;
            }

            // Switch to tab-1 and show results there
            const tab1Link = document.querySelector('a[href="#tab-1"]');
            if (tab1Link) tab1Link.click();

            showLoading(true, '1');
            const grid = document.getElementById('resultsGrid-1');
            if (grid) grid.innerHTML = ''; // Clear previous results

            try {
                const response = await fetch(`${API_BASE}/search/image`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        image_base64: selectedImageBase64,
                        limit: 12,
                        threshold: 0.3
                    })
                });
                const data = await response.json();

                if (data.results && data.results.length > 0) {
                    renderResults(data.results, 'resultsGrid-1', `Image search results (${data.count} similar products found)`);
                    grid.scrollIntoView({ behavior: 'smooth', block: 'start' });
                } else {
                    grid.innerHTML = `
                        <div class="col-12 text-center py-5">
                            <i class="fas fa-image text-muted fa-3x mb-3"></i>
                            <h4 class="text-muted">No similar products found</h4>
                            <p class="text-muted">Try a different image</p>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('Image search failed:', error);
                grid.innerHTML = `
                    <div class="col-12 text-center py-5">
                        <i class="fas fa-exclamation-triangle text-warning fa-3x mb-3"></i>
                        <h4 class="text-muted">Image search failed</h4>
                        <p class="text-muted">Please try again</p>
                    </div>
                `;
            } finally {
                showLoading(false, '1');
            }
        }

        function showLoading(show, tabNum = null) {
            if (tabNum) {
                // Show/hide specific tab spinner
                const spinner = document.getElementById(`loadingSpinner-${tabNum}`);
                if (spinner) spinner.style.display = show ? 'block' : 'none';
            } else {
                // Show/hide main search spinner (for search results)
                const spinner = document.getElementById('loadingSpinner-1');
                if (spinner) spinner.style.display = show ? 'block' : 'none';
            }
        }

        async function loadTab(tabId, category) {
            const tabNum = tabId.split('-')[1];
            const gridId = `resultsGrid-${tabNum}`;
            const grid = document.getElementById(gridId);
            if (!grid) return;

            // Only reload if empty (for better UX)
            if (grid.children.length > 0) return;

            // Show loading spinner for this tab
            showLoading(true, tabNum);

            try {
                const url = category
                    ? `${API_BASE}/products?limit=12&category=${encodeURIComponent(category)}`
                    : `${API_BASE}/products?limit=12`;
                const response = await fetch(url);
                const data = await response.json();
                renderResults(data.products, gridId);
            } catch (e) {
                console.error(`Failed to load tab ${tabId}:`, e);
                grid.innerHTML = `
                    <div class="col-12 text-center py-5">
                        <i class="fas fa-exclamation-triangle text-warning fa-3x mb-3"></i>
                        <h4 class="text-muted">Failed to load products</h4>
                        <p class="text-muted">Please check your connection to Qdrant Cloud</p>
                        <button class="btn btn-primary rounded-pill" onclick="reloadTab('${tabId}', ${category ? `'${category}'` : 'null'})">
                            <i class="fas fa-sync-alt me-2"></i>Retry
                        </button>
                    </div>
                `;
            } finally {
                showLoading(false, tabNum);
            }
        }

        function renderMiniProduct(product) {
            const imageUrl = product.image || (product.image_urls && product.image_urls[0]) || '/static/img/placeholder.png';
            const finalPrice = product.price || product.final_price || 0;
            const title = (product.name || product.title || 'Premium Product').substring(0, 40) + ((product.name && product.name.length > 40) ? '...' : '');
            const productUrl = product.url || product.product_url || '#';
            const category = product.category || 'Product';
            const initialPrice = product.initial_price || product.original_price || null;

            return `
                <div class="productImg-item products-mini-item border">
                    <div class="row g-0">
                        <div class="col-5">
                            <div class="products-mini-img border-end h-100">
                                <img src="${imageUrl}" class="img-fluid w-100 h-100" alt="${title}" style="object-fit: contain; background: white;" onerror="this.src='/static/img/placeholder.png'">
                                <div class="products-mini-icon rounded-circle bg-primary">
                                    <a href="${productUrl}" target="_blank"><i class="fa fa-eye fa-1x text-white"></i></a>
                                </div>
                            </div>
                        </div>
                        <div class="col-7">
                            <div class="products-mini-content p-3">
                                <a href="#tab-1" data-bs-toggle="pill" onclick="loadTab('tab-1', '${category}')" class="d-block mb-2 text-muted small text-uppercase">${category}</a>
                                <a href="${productUrl}" target="_blank" class="d-block h6 mb-2" title="${title}">${title}</a>
                                <div class="d-flex align-items-center">
                                    <span class="text-primary fs-6 fw-bold">$${typeof finalPrice === 'number' ? finalPrice.toFixed(2) : finalPrice}</span>
                                    ${initialPrice && initialPrice > finalPrice ? `<del class="text-muted ms-2 small">$${typeof initialPrice === 'number' ? initialPrice.toFixed(2) : initialPrice}</del>` : ''}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="products-mini-add border p-3">
                        <a href="${productUrl}" target="_blank" class="btn btn-primary border-secondary rounded-pill py-2 px-4"><i
                                class="fas fa-shopping-cart me-2"></i> Shop Now</a>
                        <div class="d-flex">
                            <a href="#" class="text-primary d-flex align-items-center justify-content-center me-3"><span class="rounded-circle btn-sm-square border"><i class="fas fa-random"></i></span></a>
                            <a href="#" class="text-primary d-flex align-items-center justify-content-center me-0"><span class="rounded-circle btn-sm-square border"><i class="fas fa-heart"></i></span></a>
                        </div>
                    </div>
                </div>
            `;
        }

        async function loadProductListCarousel() {
            const container = document.getElementById('productListCarousel');
            if (!container) return;
            try {
                // Fetch more to allow for random selection
                const response = await fetch(`${API_BASE}/products?limit=50`);
                let data = await response.json();
                let products = data.products || [];

                // Shuffle and pick 12
                products = products.sort(() => Math.random() - 0.5).slice(0, 12);

                // Destroy owl carousel if it was inited
                if (typeof $ !== 'undefined' && $.fn.owlCarousel) {
                    try { $(container).owlCarousel('destroy'); } catch (e) { }
                }

                // Group products by 4
                const groups = [];
                for (let i = 0; i < products.length; i += 4) {
                    groups.push(products.slice(i, i + 4));
                }

                container.innerHTML = groups.map(group => `
                    <div class="productImg-carousel owl-carousel productList-item">
                        ${group.map(p => renderMiniProduct(p)).join('')}
                    </div>
                `).join('');

                // Re-init Owl Carousels
                if (typeof $ !== 'undefined' && $.fn.owlCarousel) {
                    $(container).find('.productImg-carousel').owlCarousel({
                        autoplay: true,
                        smartSpeed: 1500,
                        dots: false,
                        loop: true,
                        items: 1,
                        margin: 25,
                        nav: true,
                        navText: ['<i class="bi bi-arrow-left"></i>', '<i class="bi bi-arrow-right"></i>']
                    });

                    $(container).owlCarousel({
                        autoplay: true,
                        smartSpeed: 2000,
                        dots: false,
                        loop: true,
                        margin: 25,
                        nav: true,
                        navText: ['<i class="fas fa-chevron-left"></i>', '<i class="fas fa-chevron-right"></i>'],
                        responsive: {
                            0: { items: 1 },
                            576: { items: 1 },
                            768: { items: 2 },
                            992: { items: 2 },
                            1200: { items: 3 }
                        }
                    });
                }
            } catch (e) { console.error('loadProductListCarousel failed:', e); }
        }

        async function loadBestsellers() {
            const container = document.getElementById('bestsellersContainer');
            if (!container) return;
            try {
                // Fetch a good amount and sort by rating
                const response = await fetch(`${API_BASE}/products?limit=100`);
                let data = await response.json();
                let products = data.products || [];

                // Sort by rating (high to low) and pick top 6
                products = products
                    .filter(p => p.rating) // Only those with ratings
                    .sort((a, b) => (b.rating || 0) - (a.rating || 0))
                    .slice(0, 6);

                // If no ratings, just pick random 6
                if (products.length < 6) {
                    const response2 = await fetch(`${API_BASE}/products?limit=50`);
                    const all = await response2.json();
                    products = all.sort(() => Math.random() - 0.5).slice(0, 6);
                }

                container.innerHTML = products.map((p, i) => {
                    const delay = (0.1 * (i % 3)).toFixed(1);
                    return `<div class="col-md-6 col-lg-6 col-xl-4 wow fadeInUp" data-wow-delay="${delay}s">${renderMiniProduct(p)}</div>`;
                }).join('');
                if (typeof WOW !== 'undefined') new WOW().init();
            } catch (e) { console.error('loadBestsellers failed:', e); }
        }

        async function loadDynamicBanners() {
            const container = document.getElementById('bannerContainer');
            if (!container) return;
            try {
                const response = await fetch(`${API_BASE}/products?limit=50`);
                const data = await response.json();
                const products = data.products || [];
                // Pick random 2 products with images
                const selected = products
                    .filter(p => p.image)
                    .sort(() => Math.random() - 0.5)
                    .slice(0, 2);
                if (selected.length < 2) return;

                container.innerHTML = selected.map((p, i) => {
                    const animation = i === 0 ? 'fadeInLeft' : 'fadeInRight';
                    const delay = (0.1 * (i + 1)).toFixed(1);
                    const img = p.image || '/static/img/placeholder.png';
                    const title = (p.name || 'Premium Product').substring(0, 40);
                    const price = p.price || 0;
                    const url = p.url || '#';
                    const bgOverlay = i === 0 ? 'rgba(255, 255, 255, 0.6)' : 'rgba(83, 160, 236, 0.6)';
                    const textClass = i === 0 ? 'text-primary' : 'text-white';

                    return `
                        <div class="col-lg-6 wow ${animation}" data-wow-delay="${delay}s">
                            <a href="${url}" target="_blank" style="text-decoration: none;">
                                <div class="bg-primary rounded position-relative" style="overflow: hidden;">
                                    <img src="${img}" class="img-fluid w-100 rounded" alt="${title}" style="height: 380px; object-fit: cover; background: white;">
                                    <div class="position-absolute top-0 start-0 w-100 h-100 d-flex flex-column justify-content-center rounded p-4"
                                        style="background: ${bgOverlay};">
                                <h3 class="display-5 ${textClass}">${title}</h3>
                                <p class="fs-4 ${i === 0 ? 'text-muted' : 'text-white'}" data-usd-price="${price}">${formatPrice(price)}</p>
                                <a class="btn ${i === 0 ? 'btn-primary' : 'btn-secondary'} rounded-pill align-self-start py-2 px-4" href="${url}" target="_blank">Shop Now</a>
                                    </div>
                                </div>
                            </a>
                        </div>
                    `;
                }).join('');
            } catch (e) { console.error('loadDynamicBanners failed:', e); }
        }

        function reloadTab(tabId, category) {
            const tabNum = tabId.split('-')[1];
            const gridId = `resultsGrid-${tabNum}`;
            const grid = document.getElementById(gridId);
            if (grid) grid.innerHTML = ''; // Clear to force reload
            loadTab(tabId, category);
        }

        function clearSearch() {
            // Clear the search input
            document.getElementById('searchInput').value = '';
            // Clear the results grid and reload all products
            const grid = document.getElementById('resultsGrid-1');
            if (grid) grid.innerHTML = '';
            loadTab('tab-1', null);
        }

        function renderResults(products, gridId, headerMessage = null) {
            const grid = document.getElementById(gridId);
            if (!grid) return;
            grid.innerHTML = '';

            // Add header message if provided (for search results)
            if (headerMessage) {
                grid.insertAdjacentHTML('beforeend', `
                    <div class="col-12 mb-3">
                        <div class="alert alert-info d-flex align-items-center" role="alert">
                            <i class="fas fa-info-circle me-2"></i>
                            <span>${headerMessage}</span>
                            <button type="button" class="btn btn-sm btn-outline-primary ms-auto rounded-pill" onclick="clearSearch()">
                                <i class="fas fa-times me-1"></i>Clear Search
                            </button>
                        </div>
                    </div>
                `);
            }

            if (!products || products.length === 0) {
                grid.innerHTML = '<div class="col-12 text-center py-5"><h3 class="text-muted">No products found.</h3></div>';
                return;
            }

            // Update Cache
            const startCacheIndex = renderedProductsCache.length; // Append to existing if desired, but for search/tabs usually clear. 
            // Actually for simplicity, let's just clear for now since rendering usually replaces grid.
            renderedProductsCache = products;

            products.forEach((product, index) => {
                const delay = (0.1 * (index % 4)).toFixed(1);
                // Use the simplified 'image' key or fallback
                const imageUrl = product.image || (product.image_urls && product.image_urls[0]) || '/static/img/placeholder.png';
                const finalPrice = product.price || product.final_price || 0;
                const title = product.name || product.title || 'Premium Product';
                const productUrl = product.url || product.product_url || '#';
                const category = product.category || 'Product';
                const initialPrice = product.initial_price || product.original_price || null;

                const html = `
                    <div class="col-md-6 col-lg-4 col-xl-3">
                        <div class="product-item rounded wow fadeInUp" data-wow-delay="${delay}s">
                            <div class="product-item-inner border rounded">
                                <div class="product-item-inner-item" style="height: 250px; overflow: hidden; display: flex; align-items: center; justify-content: center; background: #fff;">
                                    <img src="${imageUrl}" class="img-fluid" alt="${title}" style="max-height: 100%; object-fit: contain;" onerror="this.src='/static/img/placeholder.png'">
                                    ${product.discount ? `<div class="product-sale">-${product.discount}%</div>` : ''}
                                    <div class="product-details">
                                        <button class="btn btn-link text-white p-0" onclick="viewProduct(${index})"><i class="fa fa-eye fa-1x"></i></button>
                                        <button class="btn btn-link text-white p-0 ms-2" onclick="toggleWishlist(${index})"><i class="fas fa-heart fa-1x"></i></button>
                                        <button class="btn btn-link text-white p-0 ms-2" onclick="addToCart(${index})"><i class="fas fa-shopping-cart fa-1x"></i></button>
                                    </div>
                                </div>
                                <div class="text-center rounded-bottom p-4">
                                    <a href="#tab-1" data-bs-toggle="pill" onclick="loadTab('tab-1', '${category}')" class="d-block mb-1 text-muted small text-uppercase">${category}</a>
                                    <a href="${productUrl}" target="_blank" class="d-block h6 text-truncate mb-2" title="${title}">${title}</a>
                                    <div class="mb-2">
                                        <span class="text-primary fs-5 fw-bold" data-usd-price="${finalPrice}">${formatPrice(finalPrice)}</span>
                                        ${initialPrice && initialPrice > finalPrice ? `<del class="text-muted ms-2 small" data-usd-price="${initialPrice}">${formatPrice(initialPrice)}</del>` : ''}
                                    </div>
                                </div>
                            </div>
                            <div class="product-item-add border border-top-0 rounded-bottom text-center p-4 pt-0">
                                <button onclick="addToCart(${index})" class="btn btn-primary border-secondary rounded-pill py-2 px-4 mb-3">
                                    <i class="fas fa-shopping-cart me-2"></i> Add to Cart
                                </button>
                                <div class="d-flex justify-content-between align-items-center">
                                    <div class="d-flex text-primary">
                                        ${generateStars(product.rating || 4.5)}
                                    </div>
                                    <div class="text-muted small">${product.score ? `Match: ${(product.score * 100).toFixed(0)}%` : `${product.review_count || 0} reviews`}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                grid.insertAdjacentHTML('beforeend', html);
            });

            // Add "Show More" button pointing to Shop page
            grid.insertAdjacentHTML('beforeend', `
                <div class="col-12 text-center mt-4 wow fadeInUp" data-wow-delay="0.5s">
                    <a href="shop.html" class="btn btn-primary rounded-pill py-3 px-5">Show More</a>
                </div>
            `);

            // Re-initialize WOW animations for new elements
            if (typeof WOW !== 'undefined') {
                new WOW().init();
            }
        }

        function generateStars(rating) {
            let stars = '';
            for (let i = 1; i <= 5; i++) {
                if (i <= Math.floor(rating)) {
                    stars += '<i class="fas fa-star"></i>';
                } else if (i === Math.ceil(rating) && rating % 1 !== 0) {
                    stars += '<i class="fas fa-star-half-alt"></i>';
                } else {
                    stars += '<i class="far fa-star"></i>';
                }
            }
            return stars;
        }

        async function loadCarouselProducts() {
            const container = document.getElementById('headerCarousel') || document.querySelector('.header-carousel');
            if (!container) return;

            try {
                const response = await fetch(`${API_BASE}/products?limit=50`);
                const data = await response.json();
                const products = data.products || [];

                // Keep products with images OR fallback if none have images
                let withImages = products.filter(p => p.image || (p.image_urls && p.image_urls[0]));
                if (withImages.length === 0 && products.length > 0) {
                    withImages = products; // Fallback to all products
                }

                // Shuffle and pick 2 random
                const shuffled = withImages.sort(() => Math.random() - 0.5);
                const selected = shuffled.slice(0, 2);

                if (selected.length === 0) {
                    // Empty state - show something default
                    // Destroy owl carousel if it was inited by main.js
                    if (typeof $ !== 'undefined' && $.fn.owlCarousel) {
                        try { $(container).owlCarousel('destroy'); } catch (e) { }
                    }
                    container.innerHTML = `
                        <div class="row g-0 header-carousel-item align-items-center">
                            <div class="col-xl-6 carousel-img wow fadeInLeft" data-wow-delay="0.1s">
                                <img src="/static/img/header-img.jpg" class="img-fluid w-100" alt="Context" style="object-fit: contain; max-height: 320px;">
                            </div>
                            <div class="col-xl-6 carousel-content p-4">
                                <h4 class="text-uppercase fw-bold mb-4 wow fadeInRight" data-wow-delay="0.1s" style="letter-spacing: 3px;">Welcome to FinFit</h4>
                                <h1 class="display-3 text-capitalize mb-4 wow fadeInRight" data-wow-delay="0.3s">Amazing Products</h1>
                                <a class="btn btn-primary rounded-pill py-3 px-5 wow fadeInRight" data-wow-delay="0.7s" href="shop.html">Browse Shop</a>
                            </div>
                        </div>`;
                    // Re-init simple
                    if (typeof $ !== 'undefined' && $.fn.owlCarousel) {
                        $(container).owlCarousel({
                            items: 1,
                            autoplay: true,
                            smartSpeed: 2000,
                            dots: false,
                            loop: true,
                            nav: false
                        });
                    }
                    return;
                }

                // Destroy owl carousel if it was inited by main.js
                if (typeof $ !== 'undefined' && $.fn.owlCarousel) {
                    try { $(container).owlCarousel('destroy'); } catch (e) { }
                }

                container.innerHTML = selected.map(p => {
                    const img = p.image || (p.image_urls && p.image_urls[0]) || '/static/img/placeholder.png';
                    const name = (p.name || 'Product').substring(0, 55) + ((p.name && p.name.length > 55) ? '...' : '');
                    const cat = p.category || 'Product';
                    const url = p.url || '#';
                    let saveText = 'Special Offer';
                    if (p.discount) {
                        const m = String(p.discount).match(/(\d+)/);
                        saveText = m ? `Save Up To ${m[1]}%` : `Save ${p.discount}`;
                    } else if (p.initial_price && p.price && p.initial_price > p.price) {
                        const s = (p.initial_price - p.price).toFixed(2);
                        saveText = `Save $${s}`;
                    }
                    return `
                        <div class="row g-0 header-carousel-item align-items-center">
                            <div class="col-xl-6 carousel-img wow fadeInLeft" data-wow-delay="0.1s">
                                <img src="${img}" class="img-fluid w-100" alt="${name}" style="object-fit: contain; max-height: 320px;" onerror="this.src='/static/img/placeholder.png'">
                            </div>
                            <div class="col-xl-6 carousel-content p-4">
                                <h4 class="text-uppercase fw-bold mb-4 wow fadeInRight" data-wow-delay="0.1s" style="letter-spacing: 3px;">${saveText}</h4>
                                <h1 class="display-3 text-capitalize mb-4 wow fadeInRight" data-wow-delay="0.3s">${name}</h1>
                                <p class="text-dark wow fadeInRight" data-wow-delay="0.5s">${cat}</p>
                                <a class="btn btn-primary rounded-pill py-3 px-5 wow fadeInRight" data-wow-delay="0.7s" href="${url}" target="_blank">Shop Now</a>
                            </div>
                        </div>
                    `;
                }).join('');

                // Re-init owl carousel
                if (typeof $ !== 'undefined' && $.fn.owlCarousel) {
                    $(container).owlCarousel({
                        items: 1,
                        autoplay: true,
                        smartSpeed: 2000,
                        center: false,
                        dots: false,
                        loop: true,
                        margin: 0,
                        nav: true,
                        navText: ['<i class="bi bi-arrow-left"></i>', '<i class="bi bi-arrow-right"></i>']
                    });
                }
                if (typeof WOW !== 'undefined') new WOW().init();
            } catch (e) {
                console.error('loadCarouselProducts failed:', e);
            }
        }

        async function loadFeaturedOffers() {
            const container = document.getElementById('productsOfferContainer');
            if (!container) return;

            try {
                // Get products with discounts from Qdrant
                const response = await fetch(`${API_BASE}/products?limit=50`);
                const data = await response.json();
                const products = data.products || [];

                // Filter products with discounts and sort by discount percentage
                const productsWithDiscounts = products
                    .filter(p => {
                        const discount = p.discount || (p.initial_price && p.price && p.initial_price > p.price);
                        return discount && p.image;
                    })
                    .map(p => {
                        let discountPercent = 0;
                        if (p.discount) {
                            // Parse discount string like "-12%" or "12%"
                            const match = p.discount.toString().match(/(\d+)/);
                            discountPercent = match ? parseInt(match[1]) : 0;
                        } else if (p.initial_price && p.price && p.initial_price > p.price) {
                            discountPercent = Math.round(((p.initial_price - p.price) / p.initial_price) * 100);
                        }
                        return { ...p, discountPercent };
                    })
                    .sort((a, b) => b.discountPercent - a.discountPercent)
                    .slice(0, 2); // Take top 2 products with highest discounts

                // If we don't have 2 products with discounts, fill with regular products
                if (productsWithDiscounts.length < 2) {
                    const regularProducts = products
                        .filter(p => p.image && !productsWithDiscounts.find(po => po.id === p.id))
                        .slice(0, 2 - productsWithDiscounts.length);
                    productsWithDiscounts.push(...regularProducts);
                }

                // Render the offers
                container.innerHTML = '';
                productsWithDiscounts.forEach((product, index) => {
                    const discountPercent = product.discountPercent || 0;
                    const category = product.category || 'Product';
                    const productName = (product.name || 'Premium Product').substring(0, 30) + (product.name && product.name.length > 30 ? '...' : '');
                    const imageUrl = product.image || (product.image_urls && product.image_urls[0]) || '/static/img/placeholder.png';
                    const productUrl = product.url || '#';

                    const delay = index === 0 ? '0.2s' : '0.3s';
                    const animation = index === 0 ? 'fadeInLeft' : 'fadeInRight';

                    const offerHtml = `
                        <div class="col-lg-6 wow ${animation}" data-wow-delay="${delay}">
                            <a href="${productUrl}" target="_blank" class="d-flex align-items-center justify-content-between border bg-white rounded p-4" style="text-decoration: none;">
                                <div>
                                    <p class="text-muted mb-3">Find The Best ${category} for You!</p>
                                    <h3 class="text-primary">${productName}</h3>
                                    <h1 class="display-3 text-secondary mb-0">${discountPercent}% <span class="text-primary fw-normal">Off</span></h1>
                                </div>
                                <img src="${imageUrl}" class="img-fluid" alt="${productName}" style="max-height: 150px; object-fit: contain;" onerror="this.src='/static/img/placeholder.png'">
                            </a>
                        </div>
                    `;
                    container.insertAdjacentHTML('beforeend', offerHtml);
                });

                // Re-initialize WOW animations
                if (typeof WOW !== 'undefined') {
                    new WOW().init();
                }
            } catch (error) {
                console.error('Failed to load featured offers:', error);
                container.innerHTML = `
                    <div class="col-12 text-center py-5">
                        <p class="text-muted">Featured offers will appear here</p>
                    </div>
                `;
            }
        }

        // Chatbot Functions
        function toggleChat() {
            const chatWindow = document.getElementById('chatWindow');
            if (!chatWindow) return;
            chatWindow.classList.toggle('active');
            if (chatWindow.classList.contains('active')) {
                const input = document.getElementById('chatInput');
                if (input) input.focus();
            }
        }

        async function sendChatMessage() {
            const input = document.getElementById('chatInput');
            const chatBody = document.getElementById('chatBody');
            if (!input || !chatBody) return;
            const message = input.value.trim();

            if (message === '') return;

            // Add User Message
            const userMsgDiv = document.createElement('div');
            userMsgDiv.className = 'chat-message message-user';
            userMsgDiv.textContent = message;
            chatBody.appendChild(userMsgDiv);

            // Clear Input
            input.value = '';

            // Add Loading Indicator
            const loadingDiv = document.createElement('div');
            loadingDiv.className = 'chat-message message-ai loading';
            loadingDiv.innerHTML = '<span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span> Thinking...';
            loadingDiv.id = 'ai-loading';
            chatBody.appendChild(loadingDiv);

            // Scroll to bottom
            chatBody.scrollTop = chatBody.scrollHeight;

            const currency = document.getElementById('currencySelector') ? document.getElementById('currencySelector').value : 'USD';

            try {
                const response = await fetch(`${API_BASE}/api/chat`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        message: message,
                        currency: currency
                    })
                });

                if (!response.ok) throw new Error(`HTTP error ${response.status}`);

                const data = await response.json();

                const loader = document.getElementById('ai-loading');
                if (loader) loader.remove();

                const aiMsgDiv = document.createElement('div');
                aiMsgDiv.className = 'chat-message message-ai';
                let contentHtml = data.answer.replace(/\n/g, '<br>').replace(/\*\*(.*?)\*\*/g, '<b>$1</b>');

                if (data.products && data.products.length > 0) {
                    contentHtml += `<div class="product-results">`;
                    data.products.forEach(p => {
                        // Use the 'image_url' we sent from the backend
                        const img = p.image_url || '/static/img/placeholder.png';
                        // Convert price using our frontend helper
                        const priceDisplay = p.price_usd ? formatPrice(p.price_usd) : p.price;

                        contentHtml += `
                        <div class="product-card" onclick="window.open('${p.url || '#'}', '_blank')">
                            <img src="${img}" onerror="this.src='/static/img/placeholder.png'">
                            <div class="product-info">
                                <div class="product-name">${p.name}</div>
                                <div class="product-meta">
                                    <span class="product-price" data-usd-price="${p.price_usd}">${priceDisplay}</span>  <span class="product-availability">${p.availability || 'In Stock'}</span>
                                </div>
                            </div>
                        </div>`;
                    });
                    contentHtml += `</div>`;
                }

                aiMsgDiv.innerHTML = contentHtml;
                chatBody.appendChild(aiMsgDiv);
                chatBody.scrollTop = chatBody.scrollHeight;
            } catch (error) {
                console.error('Chat error:', error);
                const loader = document.getElementById('ai-loading');
                if (loader) loader.remove();
                const errorDiv = document.createElement('div');
                errorDiv.className = 'chat-message message-ai text-danger';
                errorDiv.textContent = "Oops! I hit a snag. Please check your connection.";
                chatBody.appendChild(errorDiv);
            }
        }

        async function init() {
            console.log(' Initializing FinFit - Loading everything from Qdrant Cloud...');

            // Re-init the existing functions and our new ones
            await Promise.all([
                loadTab('tab-1', null),
                loadTab('tab-2', 'Electronics'),
                loadTab('tab-3', 'Fashion'),
                loadTab('tab-4', 'Decoration'),
                loadCarouselProducts(),
                loadFeaturedOffers(),
                loadDynamicBanners(),
                loadProductListCarousel(),
                loadBestsellers()
            ]);

            console.log(' All dynamic content loaded from Qdrant Cloud!');
        }

        // Initialize when page loads
        window.onload = init;
    </script>
</body>

</html>